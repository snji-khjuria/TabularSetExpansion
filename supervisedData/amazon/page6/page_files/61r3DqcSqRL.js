(function(g){var m=window.AmazonUIPageJS||window.P,p=m._namespace||m.attributeErrors,e=p?p("DetailPageImageBlockAssets"):m;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,m,p){g.register("postMetric",function(){return{postCountMetric:function(b){if("undefined"!==typeof b){var a=m.ue;if(a){var c=a.count(b)||0;a.count(b,c+1)}}},postTimeMetric:function(b,a){if("undefined"!==typeof b&&"undefined"!==typeof a){var c=m.ue;c&&c.count(b,a)}}}});g.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});g.register("postEarlyMetric",function(){return null});g.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(b,a,c,d){b=b.extend(!0,{},c,d);var e=new a(b);g.register("ImageBlockAPI",function(){return e.api});return e});g.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(b,a,c){b=c.airyConfig;b.jsUrl&&g.load.js(b.jsUrl);b.cssUrl&&g.load.css(b.cssUrl)});
g.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(b,a,c,d,e,h){var k={};return function(b){var g=this;g.dispatch=function(b,c){var d=k[b];e.isDefined(d)&&a.each(d,function(a,b){b.call(m,c)})};g.register=function(a,b){e.isDefined(k[a])||(k[a]=[]);"function"===typeof b&&k[a].push(b)};g.model=new c(b,g);g.view=new d(b,g,g.model);g.api=new h(b,g,g.model);g.init=function(){g.model.init();g.view.init()};g.init()}});
g.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(b,a,c){function d(a,b,e,h,k){c.isDefined(a)&&(L.type=a);c.isDefined(b)&&(L.index=b);c.isDefined(e)&&(L.thumbnailIndex=e);c.isDefined(h)&&(L.variant=h);c.isDefined(k)&&(L.color=k)}function e(a){d("image",0,0,"MAIN",a||m.landingAsinColor||m.defaultColor)}function h(a){a=a.data;v=b.copy(L);d(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function k(a){h(a);a=b.copy(a);a.data=b.copy(L);p.dispatch("updateView",a)}function g(){v=
b.copy(L);e(L.color)}var m,p,L={},v={},H,A;return function(a,c){p=c;m=a;p.register("updateSelection",k);p.register("updateModel",h);p.register("resetModel",g);this.init=function(){e()};this.getCurrentItem=function(){return b.copy(L)};this.getPreviousItem=function(){return b.copy(v)};this.setCurrentEvent=function(a){H=a};this.getCurrentEvent=function(){return H};this.setImmersiveViewModalInstance=function(a){A=a};this.getImmersiveViewModalInstance=function(){return A}}});g.when("ImageBlockBTF",
"postMetric").execute(function(b,a){function c(a,b,d,e,f){function k(a){"click"===a.type&&e.postCountMetric("thumbClick");"click"===a.type&&D.overrideAltImageClickAction?P.dispatch("thumbActionClick",a):P.dispatch("updateSelection",a)}function l(a){D.useClickZoom||P.dispatch("imageClick",a)}function g(a){D.useClickZoom||P.dispatch("imageHover",a)}function p(a){P.dispatch("button360Click",a)}function A(b){!d.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(G.update(b),"swatchHover"!==
b.type&&K.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&e.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):G.render(b.data.color,!1,b.onload)}function w(a){P.dispatch("resize",a)}function z(a){d.selectThumbnail(a,B)}function t(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function E(a){var b=K.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var G,D,P,K,B;return function(c,d,e){G=
this;D=c;P=d;K=e;B=b("#imageBlock #altImages ul");var q=b("#imageBlock .canvas"),r=b("#main-image-container"),I;G.subViews=[];for(d=0;d<f.length;d++)G.subViews.push(new f[d](c,e,G,P));G.render=function(a,c,d){var e=0;B.find(".item").remove();a=a||K.getCurrentItem().color;b.each(G.subViews,function(b,f){e=f.render(a,e,q,B,r,c,d)||e});var f=B.find(".a-button-selected").closest(".a-declarative");I=E(f)};G.init=function(){B=b("#imageBlock #altImages ul");var c=B.find(".a-button-selected").closest(".a-declarative"),
d=c.data("action"),c=c.data(d)||{};c.color=D.landingAsinColor||D.defaultColor;P.dispatch("updateModel",{data:c});G.render(c.color,!0);D.isDebug&&m.console&&console.log(D);P.register("updateView",A);P.register("selectThumbnail",z);D.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],k);a.declarative("thumb-action",["click"],k);a.declarative("main-image-click",["click"],l);a.declarative("main-image-click",["mouseenter","mouseleave"],g);a.declarative("button-360-click",
["click"],p);b(m).resize(w)};G.update=function(a){b.each(G.subViews,function(b,c){c.update(a)});D.usePeekHover&&("mouseleave"===a.type?P.dispatch("updateSelection",I):"click"===a.type&&(I=t(a)||I))}}}var d=["A","jQuery","imageBlockUtils","postMetric"].concat(b.views);g.when.apply(g,d).register("ImageBlockView",function(){for(var a=arguments[0],b=arguments[1],d=arguments[2],e=arguments[3],k=[],l=4,g=arguments.length;l<g;l++)k.push(arguments[l]);return c(a,b,d,e,k)})});g.when("A","jQuery",
"imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(b,a,c,d,e,h,k){function m(b,d,e,h){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var k=x.getCurrentItem();if(!h||"chromeless-video"!==k.type||!B.autoplayVideo){h=0;"image"===k.type&&(h=Math.max(L(k.color,k.variant),0));var l=d+h;l>=e&&(h=0,l=d);d=c.getImageHash(k.color,h,B);-1!==d&&(Q.dispatch("updateModel",{data:{index:h,thumbnailIndex:l,variant:d.variant,
type:"image"}}),d=b.find(".item").get(l),c.selectGivenThumbnail(a(d),b))}}}function p(b,d,e){d=B.colorImages&&B.colorImages[d];var l=b;c.isDefined(d)&&(a.each(d,function(a,d){b<B.maxAlts&&(c.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:d.variant},d.thumb,R,"imageThumbnail"),b++)}),h.isEnabled&&k.logAltImgRequestPlacedOnThumbnails(a,h,x),m(R,l,b,e));return b}function J(b,c){if("image"===b.type){var d=a("#image-canvas-caption #canvasCaption"),e,f=B.staticStrings,h=B.colorImages,k=
b.color,l=b.index;c&&B.useIV?e=f.clickToExpand:h[k]&&h[k][l].hiRes&&B.useHoverZoom?(e=B.useHoverZoomIpad?f.touchToZoom:B.useClickZoom?f.clickToZoom:f.rollOverToZoom,B.hoverZoomIndicator&&(e="<img src='"+B.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):B.useIV&&(e=f.clickToExpand);d.html(e)}}function L(a,b){return c.getIndexForVariant(a,b,B)}function v(b,d){var e;a.each(b.main,function(a,b){c.isDefined(e)||(e=parseFloat(b[1]/b[0])<=parseFloat(B.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});
var h="a-dynamic-image "+e,k=c.getMaxDimensionsOfMainImage(b.main,C,B),l=k[0],g=k[1],k=a("<div></div>"),l={"max-height":l,"max-width":g};k.addClass(h).css(l).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",b.main);return k}function H(a){var c=O.find(".swatchHoverExp");a=v(a);c.find(".imgTagWrapper").html(a);b.loadImageManually(a);return c}function A(a){var b=C.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");
B.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(B.imgTagWrapperClasses)}function w(a,d){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var l=c.getImageHash(a.color,a.index,B);if(-1===l)return l={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(a,x,B)?E(a,!1,d):(Q.dispatch("updateModel",l),c.showUnavailable(a.color)),-1;var g=O.find(".item.itemNo"+a.thumbnailIndex);if(!c.isjQueryObjDefined(g)){var g=a.thumbnailIndex,g=O.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+
g+" maintain-height"),m=v(l,d);g.find(".placeHolder").replaceWith(m);O.find(".list").append(g);b.loadImageManually(m)}A(g);Q.dispatch("loadMagnifier");J(a);B.useIV&&c.isDefined(l.hiRes)&&g.css("cursor","pointer");a.isUserGenerated&&(g=x.getPreviousItem(),m=a.variant,c.isDefined(m)&&g.thumbnailIndex!==a.thumbnailIndex&&(h.isEnabled&&k.logAltImgRequestServed(h),e.postCountMetric("ImageThumbnailSelectedVariant:"+m),0===m.indexOf("IG")&&(e.postCountMetric("IGImageSelectedVariant:"+m),e.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));b.trigger("dp:image-block:update",l)}}function z(a){var d=Math.max(L(a.color,x.getCurrentItem().variant),0),d=c.getImageHash(a.color,d,B);if(-1===d)return c.lazyLoadingRequired(a,x,B)?c.lazyLoadOnHoverEnabled(B)&&(t(".3",!0),c.spinner(O,!0),b.delay(function(){x.getCurrentEvent().data===a&&E(a,!0)},500)):c.showUnavailable(a.color),-1;var e=H(d);A(e);b.trigger("dp:image-block:update",d)}function t(b,c){c?O.css("opacity",b):a("#imageBlock").css("opacity",b)}function E(a,b,e){I=b;U=
e;var h=a.color,k=B.colorToAsin[h];if(k&&k.asin){var n={};n.params={asin:k.asin,productGroupID:B.productGroupID,color:h};n.success=function(d){d?(c.ajaxState(k.asin,"success"),B.colorImages[h]=d.colorImage,c.isDefined(B.spin360ColorEnabled)&&(B.spin360ColorEnabled[h]=d.enable360),h===a.color&&(b&&I?a===x.getCurrentEvent().data&&(G(a),z(a)):(d={type:"updatedData",data:x.getCurrentItem(),onload:e||U},Q.dispatch("updateView",d))),g.register(c.rankedImagesReadyEvent(k.asin))):c.ajaxState(k.asin,"fail")};
n.error=function(){c.ajaxState(k.asin,"fail")};n.indicator=c.spinner(O);c.ajaxState(k.asin,void 0)&&"fail"!==c.ajaxState(k.asin,void 0)||(t(".3",b),d.load("/gp/product/features/apparel-main-image/ranked-images.html",n),c.ajaxState(k.asin,"sent"));return B.colorImages&&B.colorImages[h]}}function G(b,d){c.lazyLoadingRequired(b,x,B)||(a("#imageBlock").css("opacity","1"),O.css("opacity","1"),c.spinner(O,!1),O.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),
d&&O.find(".list .item").remove())}function D(){var d=O.find(".item .imgTagWrapper"),e=c.getContainerHeight(C,B.holderRatio,B.holderMaxHeight);0<e&&(C.height(e),d.height(e));O.find("img.a-dynamic-image").each(function(){var d=a(this);d.data("a-manual-replacement")&&b.loadDynamicImage(this);var e=d.data("a-dynamic-image"),e=c.getMaxDimensionsOfMainImage(e,C,B);d.css({"max-height":e[0]+"px","max-width":e[1]+"px"})})}function P(a){J(x.getCurrentItem(),"mouseenter"===a.type)}var K,B,x,Q,R,O,C,I,U,y;return function(a,
b,d,h){K=this;B=a;x=b;Q=h;B.colorImages[B.landingAsinColor]=B.colorImages[B.defaultColor];K.render=function(a,b,d,e,h,k,l){O=d;R=e;C=h;y=p(b,a,k);k||(a=x.getCurrentItem(),c.lazyLoadingRequired(a,x,B)&&Q.dispatch("updateModel",{data:{type:"lazy-loaded"}}));G(x.getCurrentItem(),!k);w(x.getCurrentItem(),l);return y};K.update=function(a){var b=a.data;x.setCurrentEvent(a);"ingress"!==b.type&&G(a.data,!1);"swatchHover"===a.type?b.color===x.getCurrentItem().color?w(x.getCurrentItem()):a.captured||-1===z(b)||
(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&e.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+y),w(b),B.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,R),"click"===a.type&&e.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+y)))};Q.register("imageHover",P);Q.register("resize",D)}});g.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(b,a,c,d,e,h){function k(a){t?a.css("cursor","url('"+v.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function g(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(b))for(var b=b[1].split("_"),d=0;d<b.length;d++){var e=b[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function N(b,p){function N(){var a;p.useClickZoom?(a=p.offsetInClickZoom,a=[Math.min(1,
Math.max(0,L[0]-(S[0]+a))/(S[2]-2*a)),Math.min(1,Math.max(0,L[1]-(S[1]+a))/(S[3]-2*a))]):a=I&&I.updatePosition();if(a&&C&&C.detailSize){var b=[C.detailSize[0]-C.rect.width,C.detailSize[1]-C.rect.height];C.detailImage.get(0).style.left=-(a[0]*b[0])+"px";C.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function w(a){var b=X?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";L=X?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function z(a){X&&a.preventDefault();w(a);p.useClickZoom?a=[S[0],S[1],S[0]+
S[2],S[1]+S[3]]:(a=I?I.offset:b.offsetParent().offset(),a=[y[0]+a.left,y[1]+a.top,y[0]+y[2]+a.left,y[1]+y[3]+a.top]);L[0]<a[0]||L[1]<a[1]||L[0]>=a[2]||L[1]>=a[3]?(p.fadeMagnifier?ea||(ea=!0,qa=setTimeout(function(){B(!0)},500)):p.useClickZoom||B(),ja&&(ja=!1,clearTimeout(pa))):(ja||(ja=!0,pa=setTimeout(function(){d.postCountMetric("dppc_hoverZoomOpened");e.isEnabled&&h.logHoverZoomRequestServed(e)},1E3)),p.fadeMagnifier&&ea&&(ea=!1,clearTimeout(qa)),N())}function B(c){c&&J.suppressMagnifier(!0);if(Y&&
(C&&C.hide(),I&&(I.destroy(),I=null),Y=!1,X?(b.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),A(),c))b.one("click.magnifier touchstart.magnifier",function(a){x(a,!0)})}function x(c,e){e&&J.suppressMagnifier(!1);if(!Y&&!V&&(0===ba&&(d.postCountMetric("dppc_hoverTime",new Date-(m.ue&&m.ue.t0||0)),ba=1),ha[ca]||(d.postCountMetric("dppc_hoverMain"),ha[ca]=1),y=
[b.position().left,b.position().top,b.width(),b.height()],ca&&(w(c),C?C.refit().show():C=new sa,p.useClickZoom||(I=I||new ma),S=C.getWindowSize(),N()),Y=!0,X?(b.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",z).bind("touchend.magnifier",B),a(document).trigger("engaged.magnifier")):(b.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",z)),e)){var f=a("#zoomWindow");if(0<f.length)f.one("click.magnifier touchend.magnifier",
function(a){B(!0)})}}function A(){p.useHoverZoom&&(X?b.bind("touchstart.magnifier touchmove.magnifier",x):b.bind("mousemove.magnifier",x))}var J=this,H={detailImageUrl:b.attr("data-old-hires"),location:"over",locationElement:b,prelaod:"ready",zIndex:50,offsetInClickZoom:50};p=a.extend(H,p);p.adjustment=[10,0,-10,0];var C=null,I=null,L=null,y=null,S=null,M={"null":1,"":1,undefined:1},Y=!1,V=!1,ca=p.detailImageUrl,X=p.useHoverZoomIpad||0,ba=0,ha={},ma=function(){function c(a){var d=Math.round(Math.min(b.width(),
C.rect.width/a));a=Math.round(Math.min(b.height(),C.rect.height/a));l.css({width:d,height:a});e=[d,a]}var d=this,e=[0,0],f=(C.detailSize&&C.detailSize[0]||5E8)/y[2],h=(C.detailSize&&C.detailSize[1]||5E8)/y[3],f=h>f?h:f;a("#magnifierLens").remove();var l=a("<div id='magnifierLens' />").css({backgroundImage:"url("+p.generalImageUrls.zoomLensBackground+")",position:"absolute"});v.showMagnifierOnHover?k(l):l.css("cursor","pointer");d.updatePosition=function(){var a=[y[2]-e[0],y[3]-e[1]],b=0>=a[0]?.5:
Math.max(0,Math.min(1,(L[0]-e[0]/2-y[0]-d.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(L[1]-e[1]/2-y[1]-d.offset.top)/a[1])),f=y[0]+Math.round(b*a[0]),a=y[1]+Math.round(c*a[1]);l.get(0).style.left=f+"px";l.get(0).style.top=a+"px";return[b,c]};d.destroy=function(){l.remove()};d.offset=b.offsetParent().offset();c(f);d.updatePosition();l.appendTo(b.parent());C.detailImage[0].complete||C.detailImage.load(function(){var a=C.detailImage.width()/y[2];c(a);d.updatePosition()})};ma.preload=function(){J.preload(p.generalImageUrls.lensBackgroundUrl)};
var sa=function(){function d(){var e={};if("over"===p.location){var e=p.useClickZoom,l={},g=a("#leftCol"),q=a("#centerCol"),r=a("#rightCol"),t=a("#hover-zoom-end"),u=a("#actionPanelContainer"),v=c.isjQueryObjDefined(g)?g.outerHeight():q.outerHeight();l.top=c.isjQueryObjDefined(g)?g.offset().top:q.offset().top;l.bottom=v+l.top;l.right=c.isjQueryObjDefined(r)?r.offset().left:u.offset().left;l.left=e?0:g.offset().left+g.outerWidth();c.isjQueryObjDefined(t)&&t.offset().top>l.bottom&&(l.bottom=t.offset().top);
e=l}else"right"===p.location&&(e=b.offset(),e={left:e.left+b.outerWidth(),top:e.top,right:e.left+b.outerWidth()+400,bottom:e.top+400});p.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+a(p.minHeightElement).outerHeight()));e.bottom=Math.min(e.bottom,a(m).scrollTop()+a(m).height());e.left+=k[0];e.top+=k[1];e.right+=k[2];e.bottom+=k[3];e.width=e.right-e.left;e.height=e.bottom-e.top;p.enhancedHoverOverlay&&c.isDefined(m.pageXOffset)&&(l=a(m).width(),e.width=l-e.left+m.pageXOffset-18,e.height-=14);
n.css({left:e.left,top:e.top,width:e.width,height:e.height});h.rect=e;return h}function e(a){var b=new Image;h.detailSize=[0,0];b.onload=function(){h.detailSize=[b.width,b.height];N()};b.src=a.attr("src");if(0<b.width&&0<b.height)h.detailSize=[b.width,b.height];else if(p.detailImageSize)h.detailSize=p.detailImageSize;else{a=g(b.src);var c=y[2]/y[3];a.SS||a.AA?(a=a.SS||a.AA,h.detailSize=[a,a]):a.SX?h.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?h.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(h.detailSize=
1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var h=this,k=p.adjustment;a("#zoomWindow").remove();var l={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:p.zIndex};p.enhancedHoverOverlay&&(l.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",l.border="1px solid #949494",l.borderColor="rgb(148,148,148)");var n=a("<div id='zoomWindow' />").css(l);p.fadeMagnifier&&n.fadeIn(200);p.useClickZoom&&(t?n.css("cursor",'url("'+p.zoomOutIcon+'"), auto'):(n.css("cursor","-webkit-zoom-out"),
n.css("cursor","-moz-zoom-out"),n.css("cursor","zoom-out")));h.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");h.detailImage&&h.detailImage.remove();n.append(b);a(document).trigger("updated.magnifier");h.detailImage=b;e(h.detailImage)};h.refit=function(){d();e(h.detailImage);return h};p.fadeMagnifier?(h.show=function(){n.fadeIn(200);return h},h.hide=function(){n.fadeOut(200);return h}):(h.show=function(){n.show();return h},h.hide=function(){n.hide();return h});
h.destroy=function(){n.remove();return h};h.getWindowSize=function(){return[h.rect.left,h.rect.top,h.rect.width,h.rect.height]};h.updateImage(ca);d();n.appendTo(document.body)},ea=!1,qa,ja=!1,pa;J.preload=function(b){b=a.makeArray(b);for(var c=b.length,d=0;d<c;d++)b[d]instanceof Array?J.preload(b[d]):"string"===typeof b[d]&&b[d]&&!M[b[d]]&&(M[b[d]]=new Image,M[b[d]].src=b[d])};J.changeImage=function(c,d){Y&&B();ca=d;b.attr("src",c);J.preload(c);y=[b.position().left,b.position().top,b.width(),b.height()];
d&&("immediately"===p.preload?J.preload(d,!0):a(m).ready(function(){J.preload(d)}),C?C.updateImage(d):b.attr("data-old-hires",d))};J.destroy=function(){b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");I&&I.destroy();I=null;C&&C.destroy();C=null};J.detailImage=function(){return C.detailImage};J.suppressMagnifier=function(a){V=a};J.isEngaged=function(){return Y};J.engageMagnifier=x;J.disengageMagnifier=B;b[0].complete?A():
b.one("load",A);J.preload(b.attr("src"));if(p.preload){var ua=p.detailImageUrl,H=function(){J.preload(ua,!0);p.useClickZoom||ma.preload()},aa=p.preload;aa.constructor!==Array&&(aa=[aa]);for(var ga=0;ga<aa.length;ga++)if("immediately"===aa[ga])H();else if(a(m)[aa[ga]])a(m)[aa[ga]](H);else a(m).bind(aa[ga],H)}return J}function J(){if(v.useHoverZoom){var b={adjustment:[0,0,1,1],generalImageUrls:v.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:v.useHoverZoomIpad,
useHoverZoom:v.useHoverZoom,useClickZoom:v.useClickZoom,fadeMagnifier:v.fadeMagnifier,zoomOutIcon:v.staticImages.zoomOutCur,enhancedHoverOverlay:v.enhancedHoverOverlay||v.atfEnhancedHoverOverlay};w&&(w.destroy(),w=p);var d=z.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.isjQueryObjDefined(d)?v.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",function(a){w=new N(d,b);w.engageMagnifier(a,!0)}),t?d.css("cursor",'url("'+v.staticImages.zoomInCur+'"), auto'):
(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):w=new N(d,b):e.isEnabled&&h.logHoverZoomApplicability(a,e)}}var L,v,H,A,w,z,t=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){L=this;v=a;H=b;e.refToModel=H;A=d;L.render=function(a,b,c,d,e,f){z=c;w&&(w.destroy(),w=p)};L.update=function(a){};A.register("loadMagnifier",J);A.register("resize",J)}});g.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",
function(b,a,c,d){function e(a,b,h){a=(a=h?h:c.getColorFromState(b.getState().hovered_variations,g))&&""!==a?a:g.defaultColor;p.dispatch("updateView",{type:"swatchHover",data:{color:a}});d.postCountMetric("swatchHover")}function h(a,b,e,h){a=(a=h?h:c.getColorFromState(b.getState().selected_variations,g))&&""!==a?a:g.defaultColor;a===m.getCurrentItem().color?"function"===typeof e&&e():(p.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:e}),d.postCountMetric("swatchClick"))}var k,
g,m,p;return function(a,c,d,f){k=this;g=a;m=c;p=f;b.on("image-block-twister-swatch-hover",e);b.on("image-block-twister-swatch-click",h);k.render=function(a,b,c,d,e){};k.update=function(a){}}});g.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(b,a,c,d,e,h){function k(b,c,e,f){!t.autoplayVideo||U||t.useChromelessVideoPlayer?!d.isjQueryObjDefined(b.find(".a-button-selected"))&&!d.productReelExperimentEnabled(t)&&(e=E.getCurrentItem(),
!f||t.prioritizeVideos||"chromeless-video"===e.type&&t.autoplayVideo)&&(f=d.getVideoHash(e.color,0,t),-1!==f&&(c+=0,G.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:f.variant,type:t.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=b.find(".item").get(c),d.selectGivenThumbnail(a(c),b))):(d.selectGivenThumbnail(b.find("img:last"),b),d.fadeToThumbnail(b.find("img").length-1,B,b))}function m(a){var b=E.getCurrentItem().color;if(t.useChildVideos&&!t.colorToVideo[b]){var c=
function(){if(a){t.colorToVideo[b]=a;var c={type:"updatedData",data:E.getCurrentItem()};G.dispatch("updateView",c)}};t.lazyLoadExperienceDisabled?c():g.when(d.rankedImagesReadyEvent(t.colorToAsin[b].asin)).execute(function(){c()})}}function p(a){if(!t.useChildVideos)return d.lazyLoadingRequired(E.getCurrentItem(),E,t)?void 0:t.videos;if(t.colorToVideo[a])return t.colorToVideo[a];var b=t.colorToAsin[a];if(b&&b.asin){var c={};c.params={asin:b.asin,productGroupID:t.productGroupID,useAiryVideoPlayer:!0,
useChromelessVideoPlayer:t.useChromelessVideoPlayer,isUDP:t.isUDP};t.isDPXFeatureEnabled||(c.success=function(a){m(a)},e.load("/gp/product/features/apparel-main-image/videos.html",c));return t.colorToVideo&&t.colorToVideo[a]}}function J(){G.dispatch("selectThumbnail",d.productReelExperimentEnabled(t)?1:0)}function L(b,e,k,g){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:e.url,swfUrl:k.swfUrl,foresterMetadataParams:k.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=d.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";h.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){J();h.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){J();h.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){Q.seek(0)}},cuePoints:[{values:e.durationSeconds-1,type:"position",
callback:function(c,d,e){c=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});J();a(this).show().css("opacity",1)})}}]})}function v(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var e=d.getVideoHash(c.color,c.index,t);if(-1===e)return-1;if("chromeful-video"===c.type){c=B.width()/B.height();var f=parseInt(e.videoWidth,10),h=parseInt(e.videoHeight,
10);d.updateAspectRatio(c,f,h,P);Q?(Q.show(),d.loadMediaIntoAiry(Q,e,R)):Q=d.createAiryInstanceForChromeful(P,e,R,null,t.autoplayVideo,B,K,D);b:if(d.productReelExperimentEnabled(t)){if(1<d.getVideosCount(E.getCurrentItem().color,t)){if(d.isDefined(x)){K.show();break b}x=a('<a class="more-videos"></a>').attr("href","#").text(t.staticStrings.watchMoreVideos);K.find("#videoCaption").append(x);b.declarative.create(x,"videoIngressClick",O)}d.playVideoInImmersiveView(t,E.getCurrentItem().color)&&(b.declarative.create(P,
"videoIngressClick",O),P.children().css("z-index","-1"),P.css("display","inline-block"))}else K.find("#videoCaption").text(t.staticStrings.playVideo),K.show();e=Q;t.autoplayVideo&&e&&!U&&(d.toggleVideoCaption(K),e.setVolume(0),e.show(),e.play(),U=!0)}else Q?(Q.show(),d.loadMediaIntoAiry(Q,e,R),Q.play(),K.show()):(Q=L(P,e,R))&&Q.play()}}function H(b,c,e){var f=p(c);c=b;d.isDefined(f)&&0<f.length&&t.alwaysIncludeVideo&&b===t.maxAlts&&(D.find(".item:last").remove(),b--);d.isDefined(f)&&(a.each(f,function(a,
c){if(b<t.maxAlts){var e=t.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",k={type:e,index:a,thumbnailIndex:b,variant:c.variant};O={type:"video-ingress",index:a,thumbnailIndex:b,variant:c.variant};d.productReelExperimentEnabled(t)&&("chromeful-video"===e&&(y+=" videoBlockIngress",d.productReelDarkIngressEnabled(t)&&(y+=" videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb",""))),t.altsOnLeft||(y+=" a-align-top"));d.createThumbnail(k,c.thumb,D,y);if(d.productReelExperimentEnabled(t)){A(D.find(".videoBlockIngress img"),
t.videoIngressATFSlateThumbURL);var k=1<f.length?"multiple-videos":"one-video",g=1<f.length?f.length+" "+t.staticStrings.multipleVideos:t.staticStrings.singleVideo;g&&D.find(".videoBlockIngress").append(D.find("#videoCount_template").clone().text(g).attr("id","videoCount")).addClass(k)}I||(I=!0,h.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(d.productReelExperimentEnabled(t))return!1}),k(D,c,b,e));return b}function A(a,b){var c=a.attr("src");
if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function w(a){Q&&Q.pause();a.data=O;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";G.dispatch("imageClick",a);h.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);h.postCountMetric(b)}var z,t,E,G,D,P,K,B,x,Q,R,O,C,I=!1,U=!1,y="videoThumbnail";return function(c,e,f,k){z=this;t=c;E=e;G=k;R=t.airyConfig;t.colorToVideo={};t.colorToVideo[t.landingAsinColor]=
t.colorToVideo[t.defaultColor]=t.videos;z.render=function(c,e,f,h,k,g){D=h;P=k.find("#main-video-container");K=P.parent().find("#video-canvas-caption");B=a("#main-image-container");t.useChromelessVideoPlayer||P.addClass("chromeful-container");C=H(e,c,g);v(E.getCurrentItem());d.productReelExperimentEnabled(t)&&b.declarative("videoIngressClick",["click"],w);return C};z.update=function(a){var b=a.data;"ingress"!==b.type&&Q&&(Q.hide(),P.parent().css("z-index",-1),K.hide());if("swatchHover"===a.type)b.color===
E.getCurrentItem().color?v(E.getCurrentItem()):a.captured||d.lazyLoadingRequired(b,E,t)&&!d.lazyLoadOnHoverEnabled(t)&&v(E.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&h.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+C),v(b),t.usePeekHover&&"click"!==a.type||(d.selectGivenThumbnail(a.$declarativeParent,D),"click"===a.type&&d.productReelDarkIngressEnabled(t)&&(h.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+C),O.action="videoIngressClick",O.clickTimeStamp=a.$event.timeStamp,G.dispatch("videoIngressClick",O),h.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(t.isDPXFeatureEnabled)b.on("triggerVideoAjax",m)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(b,a,c,d,e,h,k,g,N,J){function L(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function v(){u.find("#ivTitle").click(function(){W.hide()})}function H(a){if(e.productReelExperimentEnabled(T)){var b=u.find("#ivMediaSelect");b.find("option[value='"+a+"']").attr("selected",!0);b.trigger("change")}}function A(){Z=$a?{type:"360-spin"}:ka.getCurrentItem()}function w(){var a=u.find("#ivStage"),b=W.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-J.getDimension(c,"padding-top")-J.getDimension(c,"padding-bottom");u.css("height",
b);var c=u.find("#ivTitle").outerHeight(!0),d=u.find("#ivVariationSelection").outerHeight(!0),e=u.find("#ivMediaSelection").outerHeight(!0),f=u.find("#ivThumbs"),h=J.getDimension(f,"margin-top")+J.getDimension(f,"margin-bottom");f.css("height",b-c-d-e-h);u.find("#ivLargeImage").css("height",b);a.css("width",u.width()-J.getDimension(u,"padding-left")-J.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-J.getDimension(a,"margin-left")-J.getDimension(a,"margin-right"))}function z(){u.find("#ivMediaSelect").change(function(){var a=
d(this).val();"all"===a?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===Z.type&&u.find("#ivVideo_"+Z.index).click()):"images"===a?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===Z.type&&(0===oa&&0===da?u.find("#iv360").click():0===oa?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===a&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==
Z.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+Z.index).click())})}function t(){var a=u.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(b/e,c/f),k=f*h,l=e*h;1>h?(Ya?a.css("cursor","url('"+T.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),Va=!0):Va=!1;e=Math.min(l,e);f=Math.min(k-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");Wa=!1}function E(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();J.animateStageIn(b);b.append(a);t()}function G(){ia&&ia.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display",
"none");R()}function D(a){G();u.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?e.isDefined(la)&&(b=L(la[Z.index])):e.isDefined(Fa)&&(b=L(Fa[Z.index]));if(e.isDefined(b)){u.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),f=u.find("#ivLargeImage");J.animateStageOut(f,function(){c.load(function(){E(c)});if(c[0].complete)E(c);else{f.empty();var a=(f.height()-104)/2,b=(f.width()-80)/2;d("<img>").attr("src",T.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(f)}})}}function P(){var a=parseInt(Z.index,10)+1;a>=F.length||u.find("#ivVideo_"+a).click()}function K(){var a;e.isDefined(F)&&(a=F[Z.index]);if(e.isDefined(a)){G();var b=u.find("#ivLargeVideo").css("display","block");ia?(ia.isDetached()&&ia.attach(b[0]),e.loadMediaIntoAiry(ia,a,ta),ia.show()):(ia=e.createAiryInstanceForChromeful(b,a,ta,"ImmersiveView"),ta.enableContinuousPlay&&ia.bind("ended",P));ia.play({isAsync:!0})}}function B(){A();var a;"hero-image"===Z.type?
a=u.find("#ivHeroImage_"+Z.index):"image"===Z.type?(a=u.find("#ivImage_"+Z.index),H("all")):"chromeful-video"===Z.type||"chromeless-video"===Z.type?(a=u.find("#ivVideo_"+Z.index),H("videos")):a="360-spin"===Z.type?u.find("#iv360"):e.isDefined(la)?u.find("#ivHeroImage_"+Z.index):u.find("#ivImage_"+Z.index);e.isjQueryObjDefined(a)||(a=u.find("#ivImage_0"));x(a)}function x(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(Z.type="chromeful-video",Z.index=
a.attr("id").split("_")[1],K()):a.hasClass("ivHeroImage")?(Z.type="hero-image",Z.index=a.attr("id").split("_")[1],D(Z.type)):a.hasClass("iv360Image")?(Z.type="360-spin",Z.index=0,Q()):(Z.type="image",Z.index=a.attr("id").split("_")[1],D(Z.type))}function Q(){G();u.find("#ivLarge360").css("display","block");y();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});J.animateStageIn(a)},200);C();k.postCountMetric("dppc_click360");xa=Date.now()}function R(){0<xa&&(O("dppc_duration360",
Date.now()-xa),xa=0)}function O(a,b){m.ue&&m.ue.count(a,b)}function C(){if(0<za){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function I(a,b){if(za<a.length){var c=d("<img />").css({display:"block",width:6*Ca+"px",height:Ba+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(za++,1===za&&(C(),0<xa&&O("dppc_loadTime360",Date.now()-xa)),0<ra&&O("dppc_perSpriteloadTime360",Date.now()-ra),u.find("#iv360Spinner").hide(),
c.show(),Ia=5*fa.imageLocations[Math.floor(La/fa.imageLocations[0].length)][La%fa.imageLocations[0].length],I(a,b))};c.attr("src",a[za].replace(/(\._SP)\d+(,)\d+/,"$1"+wa+"$2"+Ja));ra=Date.now()}}function U(a){if(e.isDefined(fa.spriteWidthSizes)&&0<fa.spriteWidthSizes.length){var b=fa.spriteWidthSizes,c=b.length,d=b[0],f=b[c-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function y(){var a=u.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",T.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Da=!0,S())}function S(){if(e.isDefined(fa.spriteURLs)&&
e.isDefined(u)&&Da&&!Ea){var a=u.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(fa.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",fa.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(T.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=fa.imageWidth,c=fa.imageHeight,f=a.parent().width(),h=a.parent().height(),
k=0,g=0;b/c>f/h?(wa=U(f),Ja=Math.round(c/b*wa),Ca=Math.ceil(f),Ba=Math.ceil(Ja/wa*f),g=(h-Ba)/2):(Ja=U(h),wa=Math.round(b/c*Ja),Ba=Math.ceil(h),Ca=Math.ceil(wa/Ja*h),k=(f-Ca)/2);a.css({"margin-left":k,"margin-top":g,width:Ca+"px",height:Ba+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*Ca+"px");I(fa.spriteURLs,u.find("#image-360-sprites"),0);b=u.find("#ivLarge360");b.bind("mousedown",ca);b.bind("touchstart",M);b.bind("touchmove",Y);b.bind("touchend",V);
d(document).bind("mousemove",X);d(document).bind("mouseup",ba);e.isDefined(T.staticImages.grab)&&a.css("cursor","url('"+T.staticImages.grab+"'), auto");Ea=!0}}function M(a){Qa=!0;Aa=a.originalEvent.targetTouches[0].clientX}function Y(a){Qa&&(ha(a.originalEvent.targetTouches[0].clientX-Aa),Aa=a.originalEvent.targetTouches[0].clientX)}function V(a){Qa&&(Qa=!1)}function ca(a){Ma=!0;Ua=a.originalEvent.clientX;e.isDefined(T.staticImages.grabbing)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+T.staticImages.grabbing+
"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+T.staticImages.grabbing+"'), auto"));return!1}function X(a){Ma&&(ha(a.originalEvent.clientX-Ua),Ua=a.originalEvent.clientX)}function ba(a){Ma&&(Ma=!1,e.isDefined(T.staticImages.grab)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+T.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function ha(a){for(a=Ia-=a/Ca*180;0>a;)a+=360;for(;360<a;)a-=360;Ia=a;var b;a=360;for(var c=0;c<za;c++)for(var d=
0;d<fa.imageLocations[c].length;d++){var f=Math.abs(Ia-5*fa.imageLocations[c][d]);f<a&&(a=f,b=c*fa.imageLocations[0].length+d)}b!==La&&(a=Math.floor(b/fa.imageLocations[0].length),a!==Math.floor(La/fa.imageLocations[0].length)&&(e.isDefined(Xa)||(Xa=document.createElement("canvas").getContext("2d")),c=u.find("#image-360-sprites").children(),Xa.drawImage(c[a],0,0)),a=u.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));La=b;a=b%fa.imageLocations[0].length*
-1*Ca;b=-1*Math.floor(b/fa.imageLocations[0].length)*Ba;c=u.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function ma(){u.delegate(".ivThumb","click",function(){var a=d(this);x(a)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var a=d(this);a.addClass("selected");Z.type="chromeful-video";Z.index=a.attr("id").split("_")[1];
K()})}function sa(){ia&&!ia.isDetached()&&(ta.volume=ia.getVolume(),ia.detach(),!document.all||m.atob||document.addEventListener||(ia=null));u.find("#ivLargeImage").empty();R()}function ea(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function qa(a){var b=Ga.top-(a.pageY-Na[1])*Ka;a=ea(Ga.left-(a.pageX-Na[0])*Ka,Pa.left);b=ea(b,Pa.top);u.find(".fullscreen").css({left:a,top:b})}function ja(){u.delegate("#ivLargeImage","click",function(a){if(Wa)t();else if(Va){u.find(".fullscreen").removeAttr("style");
if(Va){var b=u.find("#ivLargeImage"),c=b.find(".fullscreen");Ya?b.css("cursor","url('"+T.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Wa=!0;var d=u.find("#ivLargeImage");Pa.left=d.width()-c.width();Pa.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Na=[b.offset().left+e,b.offset().top+d];Ga.top=d-c.height()/2;Ga.left=e-c.width()/2;c.css({position:"relative",left:Ga.left,top:Ga.top});Ka=Math.max(c.height()/
b.height(),c.width()/b.width())}qa(a)}});u.delegate("#ivLargeImage","mousemove",function(a){Wa&&qa(a)})}function pa(c){if(e.isImmersiveViewEnabled(T,ka.getCurrentItem().color)){$a=e.isDefined(c)&&"button-360-click"===c.action;g.isEnabled&&N.logImmersiveViewRequestServed(g);k.postCountMetric("dppc_immersiveViewOpened");if(e.isDefined(W))W.show();else{c=d("#auiImmersiveViewDiv");var f=d(m).height()-150,h=d(m).width()-75;W=a.create(c,{name:"immersiveView",activate:"onclick",width:h,height:f,popoverLabel:"ImmersiveView",
hideHeader:!0});c.click()}if(Za){u=d("#ivMain");c=ka.getCurrentItem().color;Fa=T.colorImages[c];la=T.heroImage[c];F=T.useChildVideos?T.colorToVideo[c]:T.videos;Ra=aa()&&T.spin360ColorEnabled[c];fa=aa()?T.spin360ColorData[c]:p;A();va=da=Ha=oa=0;e.isDefined(la)&&(da=la.length);e.isDefined(Fa)&&(oa=Fa.length);e.isDefined(F)&&(Ha=F.length);Ra&&(va=1);J.populateTitle(u.find("#ivTitle"),45,T);J.populateVariationSelection(u.find("#ivVariationSelection"));c=u.find("#ivMediaSelect");0===oa+va||0===Ha?(c.parent().hide(),
u.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),d("<option/>").attr("value","all").prop("selected",!0).text(T.staticStrings.allMedia+" ("+(da+oa+va+Ha)+")").appendTo(c),d("<option/>").attr("value","images").text(T.staticStrings.images+" ("+(da+oa+va)+")").appendTo(c),d("<option/>").attr("value","videos").text(T.staticStrings.videos+" ("+Ha+")").appendTo(c),c.parent().show(),c.val("all"));c=u.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var f=da+oa+Ha+va,t=h=0;h<
f;)for(var v=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),w=0;3>w&&h<f;w++,h++,t++)if(t<da){var x=la[h].thumb,y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(v);y.find(".ivThumbImage").css("background",'url("'+J.getResizedThumbnailURL(x)+'") center no-repeat')}else if(t>=da&&t<oa+da)x=Fa[h-da].thumb,y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(h-da)).appendTo(v),y.find(".ivThumbImage").css("background",'url("'+J.getResizedThumbnailURL(x)+'") center no-repeat');else if(t>=da+oa&&t<oa+da+va)y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(v),y.find(".ivThumbImage").css("background",'url("'+(e.isDefined(T.staticImages.icon360)?J.getResizedThumbnailURL(T.staticImages.icon360,!0):"")+'") center no-repeat');else if(x=F[h-oa-da-va],y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(h-oa-da-va)).appendTo(v),y.find(".ivThumbImage").css("background",'url("'+x.thumbUrl+'") center no-repeat'),e.isDefined(x)){var C={position:"triggerTop"},z=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");z.find(".ivVideoPopoverTitle").text(x.title);z.find(".ivVideoPopoverDuration").text(x.durationTimestamp);C.inlineContent=z[0];b.declarative.create(y,"a-tooltip",C)}c=u.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();
f=c.find(".placeholder");for(h=0;h<Ha;h++)t=F[h],v=f.clone().removeClass("placeholder").appendTo(c),v.attr("id","ivVideoList_"+h),v.find(".ivThumbImage").css("background",'url("'+t.thumbUrl+'") center no-repeat'),v.find(".ivThumbTitle").text(t.title),v.find(".ivThumbDuration").text(t.durationTimestamp);u.find("#ivLarge360").empty();za=0;Ea=Da=!1;ta=T.airyConfig;Za=!1;Ta()}}}function ua(a){var b=T.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var f="360"+b.asin,l=Date.now();c.success=
function(b){O("dppc_asyncRequestTime360",Date.now()-l);b&&e.isDefined(b.spin360.spin360Model)?(e.ajaxState(f,"success"),T.spin360ColorData[a]=b.spin360.spin360Model,a===ka.getCurrentItem().color&&(fa=T.spin360ColorData[a],S())):c.error()};c.error=function(){k.postCountMetric("dppc_asyncFailed360");O("dppc_asyncRequestTime360",Date.now()-l);d*=2;16E3>=d?setTimeout(function(){l=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",c)},d):e.ajaxState(f,"fail")};e.ajaxState(f)&&"fail"!==
e.ajaxState(f)||(h.load("/gp/product/features/apparel-main-image/360.html",c),e.ajaxState(f,"sent"))}}function aa(){return e.isDefined(T.spin360ConfigEnabled)&&T.spin360ConfigEnabled}var ga,T,ka,na,W,u,la,Fa,F,da,oa,Ha,va,Z,ia,ta,fa,Ra,Ca,Ba,Ja,wa,Ua,Aa,$a=!1,Da=!1,Ea=!1,Ia=0,La=0,xa=0,ra=0,Ma=!1,Qa=!1,za=0,Xa,Ya=navigator.userAgent.match(/msie|trident/i),Za=!0,Wa=!1,Va=!1,Pa={},Ga={},Ka,Na,Ta=b.once(function(){z();ma();ja();b.on("a:popover:afterUpdatePosition:immersiveView",w);b.on("a:popover:afterShow:immersiveView",
B);b.on("a:popover:afterHide:immersiveView",sa);v()});return function(a,c,f,h){ga=this;T=a;ka=c;g.refToModel=ka;na=h;aa()&&(T.spin360ColorData[T.landingAsinColor]=T.spin360ColorData[T.defaultColor],T.spin360ColorEnabled[T.landingAsinColor]=T.spin360ColorEnabled[T.defaultColor]);e.isDefined(T.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",J.addStyleCodeToURL(T.staticImages.icon360,"_FMpng_RI_"));ga.render=function(a,c,d,f,h,l){Za=!0;aa()&&T.spin360ColorEnabled[a]&&
!e.isDefined(T.spin360ColorData[a])&&(T.spin360ColorData[a]={},ua(a));e.isImmersiveViewEnabled(T,ka.getCurrentItem().color)&&aa()&&T.spin360ColorEnabled[a]&&(c===T.maxAlts&&(a=f.find(".item.imageThumbnail"),d=f.find(".item.videoThumbnail"),e.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),c--),a=f.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),b.declarative.create(a,"button-360-click"),f.append(a),c++,k.postCountMetric("dppc_display360"));
return c};ga.update=function(a){};na.register("imageClick",pa);na.register("button360Click",pa)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(b,a,c,d,e,h,k,g,p,J){function L(){var a=z.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-J.getDimension(c,
"padding-top")-J.getDimension(c,"padding-bottom");d("#iv-tab-view-container").css("height",a);G=d("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==d(this).css("display")}).length;1<G?(d("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=d("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=c):d("#iv-tab-view-container ul.iv-tab-views li").parent().hide();d("#iv-tab-view-container .iv-tab-content").css("height",a);b.trigger("dp:image-block:immersive-view:resize")}
function v(){b.trigger("dp:image-block:immersive-view:reset")}function H(c){if(e.isImmersiveViewEnabled(w,z.getCurrentItem().color)){g.isEnabled&&p.logImmersiveViewRequestServed(g);k.postCountMetric("dppc_immersiveViewOpened");e.isDefined(c)&&("button-360-click"===c.action?d("#iv360TabHeading").click():"videoIngressClick"===c.action?(D=c.clickTimeStamp,d("#ivVideosTabHeading").click()):d("#ivImagesTabHeading").click());var f=z.getImmersiveViewModalInstance();if(e.isDefined(f))f.show();else{c=d("#auiImmersiveViewDiv");
var f=Math.min(Math.max(d(m).height()-150,540),1080),h=Math.min(Math.max(d(m).width()-75,990),1980),f=a.create(c,{name:"immersiveView",activate:"onclick",width:h,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});z.setImmersiveViewModalInstance(f);c.click()}E&&(E=!1,P(),b.trigger("dp:image-block:immersive-view:init"))}}var A,w,z,t,E=!0,G=0,D,P=b.once(function(){b.on("a:popover:afterUpdatePosition:immersiveView",L);b.on("a:popover:afterShow:immersiveView",L);b.on("a:popover:afterHide:immersiveView",
v)}),K=b.once(function(){var a=d("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(c){var e=a.filter(".iv-active");e.attr("id")!==d(this).attr("id")&&b.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",c);a.removeClass("iv-active");d(this).addClass("iv-active");d("#iv-tab-view-container .iv-tab-content").hide();e=d(this).find("a").attr("data-iv-tab-view");d("#"+e).show();"ivVideosTab"===e&&(c.clickTimeStamp=D||c.timeStamp);b.trigger("dp:ivTabs:"+e+":select",
c);k.postCountMetric("dppc_"+e);return!1})});return function(a,b,c,d){A=this;w=a;z=b;g.refToModel=z;t=d;A.render=function(a,b,c,d,e,f){k.postCountMetric("dpcc_altThumbs_"+b);E=!0};A.update=function(a){};A.getTitle=function(){};A.getVariationSelectionInfo=function(){};K();t.register("imageClick",H);t.register("button360Click",H);e.productReelDarkIngressEnabled(w)&&t.register("videoIngressClick",H)}});g.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(b,a,c){return{load:function(a,
c){c=c||{};c.timeout=c.timeout||4E3;b.ajax(a,c)}}});g.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(b,a,c,d,e,h,k,g){function p(a){return null!==a&&"undefined"!==typeof a}function J(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function L(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function v(a,b,c){b=b.width();
if(c.naturalMainImageSize)return b;a=J(a);0<a&&(b=Math.min(b,a));return b}function H(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=L(a);0<a&&(b=Math.min(b,a));return b}function A(b){var c;a.each(b,function(a,b){p(c)||(c=b[1]/b[0])});return c||1}function w(a,b,c){b.fadeTo(500,0,function(){t(a,c);b.fadeTo(500,1)})}function z(a){a&&a.toggle()}function t(b,c){var d=c.find("img");p(d[b])&&a(d[b]).click()}function E(a,b){O[a]=b?b:O[a];return O[a]}function G(b,c,d){d=d||R;d=d.colorImages;if(1>
d.length||!p(d[b])||!p(c))return-1;var e=-1;a.each(d[b],function(a,b){b.variant===c&&(e=a)});return e}function D(b,c,d){d=d||R;d=d.colorImages;return!(p(d)&&p(d[b])&&p(d[b][c])&&p(d[b][c].main))||1>a.map(d[b][c].main,function(a,b){return b}).length?-1:d[b][c]}function P(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function K(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function B(b,c){var d;if(d=
b.useIV)d=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;k.isEnabled&&(k.IVApplicaple=d,g.logImmersiveViewApplicability(a,k));return d}var x,Q,R=a.extend(!0,{},e,h),O={};return{isDefined:p,isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:A,getMaxHeightOfMainImage:H,getMaxWidthOfMainImage:v,getMaxDimensionsOfMainImage:function(a,b,c){var d=H(a,b,c);b=v(a,b,c);a=A(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);
a=0;if(p(d)){a=d.offsetWidth/b;a=Math.min(a,c);var e;b=R.mainImageHeightPartitions;c=R.mainImageMaxSizes;if(p(c)&&p(b)){for(var f=0,h=m.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)h>b[d]&&(f=d+1);c.length>=f&&(e=c[f])}p(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(b,c){if(b){c=c||R;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,c,d,e){var f=d.find(".template").clone().removeClass("template").addClass("item"),
h=document.createElement("img");h.src=c;f.find(".placeHolder").replaceWith(h);(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&f.addClass("heroImageThumbnail");p(e)&&f.addClass(e);b.declarative.create(f,"thumb-action",a);d.append(f)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,e,h,k,g,
n,m,q){var p=a.extend({},h.foresterMetadataParams);null!==k&&(p.method+="."+k);var r=[];e.disabledViewIds&&(r=e.disabledViewIds);return c.embed({parentElement:b[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:h.swfUrl,foresterMetadataParams:p,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:h.videoAds,bindings:{play:function(){"ImmersiveView"===k?
x||(x=!0,d.postCountMetric("dppc_chromefulVideoPlayedIV")):Q||(Q=!0,d.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,c){g&&(w(0,n,q),z(m))}}],disabledViewIds:r})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},
showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:w,toggleVideoCaption:z,selectThumbnail:t,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();0===d.length&&(d=a("<div></div>").append(a("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)",
"-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:E,getIndexForVariant:G,getImageHash:D,lazyLoadingRequired:function(a,b,c){b=Math.max(G(a.color,b.getCurrentItem().variant,c),0);b=-1!==D(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;
a=!a||"success"!==E(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:P,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();P(c,16,9,b)},d||0)},productReelExperimentEnabled:K,productReelDarkIngressEnabled:function(a){return K(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?
b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!p(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return p(a)&&p(a[b])&&p(a[b].url)?a[b]:-1},isImmersiveViewEnabled:B,playVideoInImmersiveView:function(a,b){return B(a,b)&&K(a)}}});g.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(b,a,c,d,e){function h(b,e,h,k){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var n=z.getCurrentItem();
if(!k||"chromeless-video"!==n.type||!w.autoplayVideo){k=0;if("hero-image"===n.type){k=g(n.color,n.variant);if(-1===k)return;k=-1!==k?k:0}var m=e+k;m>=h&&(k=0,m=e);e=d.getHeroImageHash(w,n.color,k);-1!==e&&(t.dispatch("updateModel",{data:{index:k,thumbnailIndex:m,variant:e.variant,type:"hero-image"}}),e=b.find(".item").get(m),c.selectGivenThumbnail(a(e),b))}}}function k(b,d,e){if("hero-video"===z.getCurrentItem().type)return b;d=w.heroImage&&w.heroImage[d];var l=b;c.isDefined(d)&&(a.each(d,function(a,
d){b<w.maxAlts&&(c.createThumbnail({type:"hero-image",index:a,thumbnailIndex:b,variant:d.variant},d.thumb,E,"imageThumbnail"),b++)}),h(E,l,b,e));return b}function g(b,d){var e=w.heroImage;if(1>e.length||!c.isDefined(e[b])||!c.isDefined(d))return-1;var h=-1;a.each(e[b],function(a,b){b.variant===d&&(h=a)});return h}function m(){if(G.length&&w.repositionHeroImage){var a=d.getHeroDimParams(w,z.getCurrentItem()),b;c.isDefined(a)&&(b=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",
G.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function p(a,b,e,h){if(G.length&&a&&b){if("function"===typeof e||h){var k=new Image;k.onload=h?function(){G.css("background-image",'url("'+a+'")')}:e;k.src=a}e=b[1];var k=b[0],g;h||G.css({"background-image":'url("'+a+'")'});w.repositionHeroImage&&(b=d.getHeroDimParams(w,z.getCurrentItem(),b),c.isDefined(b)&&(e=b.width,k=b.height,g=c.isDefined(b.xPos)?
b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));G.css({"background-position":g,"background-size":e+"px "+k+"px ","max-width":e+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function L(b,c,e,f){b=d.getHeroImageHash(w,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];p(c,b.main[c],e,f)}function v(a,b,c){if("hero-image"!==a.type)return-1;var e=g(a.color,z.getCurrentItem().variant),e=-1!==e?e:0;if(-1===d.getHeroImageHash(w,a.color,e))return-1;var f=z.getCurrentItem();a.thumbnailIndex=
f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=e;H(a,b,c)}function H(a,c,e){var f=d.getHeroImageHash(w,a.color,a.index),h;h=a&&D&&b.equals(a,D)?!0:!1;D||(D=a);if(!h&&a||c)L(a.color,a.index,c,e),D=a;G.removeClass("hide-background");b.trigger("dp:image-block:update",f)}var A,w,z,t,E,G,D={};return function(b,d,e,h){A=this;w=b;z=d;t=h;w.heroImage[w.landingAsinColor]=w.heroImage[w.defaultColor];A.render=function(b,c,d,e,f,h,l){E=e;G=a("#heroImage");b=k(c,b,h);v(z.getCurrentItem(),l,h);return b};
A.update=function(a){var b=a.data;"ingress"!==b.type&&G.addClass("hide-background");"swatchHover"===a.type?a.captured||(b.type=z.getCurrentItem().type,-1!==v(b)&&(a.captured=!0)):"hero-image"===b.type&&(H(b),"click"!==a.type&&w.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,E))};t.register("resize",m)}});g.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(b,a,c,d,e){var h,k,g,m;return function(a,d,e,
l){h=this;k=a;g=l;h.render=function(a,d,e,l,g,n,p){m=l;h=this;e=k.maxAlts;l=d;g=k.colorImages[a]?k.colorImages[a].length:0;g+=c.getVideosCount(a,k);a=k.heroImage[a];n=0;a&&(n=a.length);a=g+n;a>e&&(e=a-e,a=m.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),e+="+",l={type:"ingress",index:0,thumbnailIndex:d,variant:""},a.find("#altIngressText").append(e),b.declarative.create(a,"thumb-action",l),m.append(a),l=d++);return l};h.update=function(a){"ingress"===
a.data.type&&"click"===a.type&&g.dispatch("imageClick",a)}}});g.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(b,a,c){return function(a,b,d){this.getImageHash=function(b){var e=d.getCurrentItem();b=c.getIndexForVariant(e.color,b||"MAIN",a);return c.getImageHash(e.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});g.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(b,a,c){function d(a,b){var c;if(b.repositionHeroImage){c=a[1];var e=a[0];if(768>=(m.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,e*=.7;else{var f=((m.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,f=Math.max(Math.min(f,1),0);c*=.7+.3*f;e*=.7+.3*f}c=[c,e]}return c}function e(a,b,d){var h;if(d.repositionHeroImage){var k=m.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;
if(c.isDefined(d)){h=Math.max((k-Math.min(1500,a))/2,0);var l=Math.max((k-a)/2,0);h-=l;k=Math.max(Math.min(k,1500),1024);h=h+(k-420-23)/2-a/b[1]*d}}return h}function h(b,d,e){b=b.heroImage;return!(c.isDefined(b)&&c.isDefined(b[d])&&c.isDefined(b[d][e])&&c.isDefined(b[d][e].main))||1>a.map(b[d][e].main,function(a,b){return b}).length?-1:b[d][e]}return{getHeroImageHash:h,getHeroDimParams:function(b,k,g){if(b.repositionHeroImage){if(!c.isDefined(g)){g=h(b,k.color,k.index);if(-1===g)return;k=a.map(g.main,
function(a,b){return b})[0];g=g.main[k]}k=d(g,b);b=e(k[0],g,b);return{height:k[1],width:k[0],xPos:b,yPos:75}}}}});g.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(b,a,c,d,e,h,k){function g(a,c){var d=b.copy(a);if(k.isDefined(a)&&a.length>c){try{for(var e=-1,f=0;f<a.length;f++){var h=a.charAt(f);if(" "===h||"."===h||"?"===h||";"===h||","===h||":"===h)e=f;if(f===c-4){d=a.substring(0,-1===e?f:e);break}}}catch(l){d=
a.substring(0,c-3)}d+="..."}return d}function p(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,c){b.on("dp:ivTabs:"+a+":select",c)},attachTabDeselectHandler:function(a,c){b.on("dp:ivTabs:"+a+":deselect",c)},attachImmersiveViewResizeHandler:function(a){b.on("dp:image-block:immersive-view:resize",a)},
attachImmersiveViewResetHandler:function(a){b.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:p,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return p(a,c)},populateVariationSelection:function(b){if(k.isDefined(m.DetailPage)&&
k.isDefined(m.DetailPage.StateController)){b.empty();var c=m.DetailPage.StateController.getState(),d=c.variation_label_order,e;for(e in d)if(d.hasOwnProperty(e)){var f=d[e],h=c.selected_variations[f],f=c.variation_display_labels[f];h&&a("<div/>").addClass("ivVariations").text(f+":"+h).appendTo(b)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(g(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)}}});
g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(b,a,c,d,e,h,k,g){function m(){var a=B.getCurrentItem().color;R=K.colorImages[a];Q=K.heroImage[a];O=C=0;e.isDefined(Q)&&(O=Q.length);e.isDefined(R)&&(C=R.length)}function p(a){return a.hiRes||a.large||a.main[a.main.length-1]}function L(){var a=x.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");
d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(b/e,c/f),k=f*h,l=e*h;1>h?(U?a.css("cursor","url('"+K.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),M=!0):M=!1;e=Math.min(l,e);f=Math.min(k-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});
a.css("visibility","visible");S=!1}function v(a){var b=x.find("#ivLargeImage");b.css("visibility","hidden");b.empty();g.animateStageIn(b);b.append(a);L()}function H(a){x.find("#ivLargeImage").css("display","none");x.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?e.isDefined(Q)&&(b=p(Q[I.index])):e.isDefined(R)&&(b=p(R[I.index]));if(e.isDefined(b)){x.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),f=x.find("#ivLargeImage");g.animateStageOut(f,
function(){c.load(function(){v(c)});if(c[0].complete)v(c);else{f.empty();var a=(f.height()-104)/2,b=(f.width()-80)/2;d("<img>").attr("src",K.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(f)}})}}function A(a){x.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?I.type="hero-image":I.type="image";I.index=a.attr("id").split("_")[1];H(I.type);k.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(I.index,10)+1)+"_"+(O+C))}function w(){x.delegate(".ivThumb",
"click",function(){var a=d(this);A(a)})}function z(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function t(a){var b=V.top-(a.pageY-X[1])*ca;a=z(V.left-(a.pageX-X[0])*ca,Y.left);b=z(b,Y.top);x.find(".fullscreen").css({left:a,top:b})}function E(){x.delegate("#ivLargeImage","click",function(a){if(S)L();else if(M){x.find(".fullscreen").removeAttr("style");if(M){var b=x.find("#ivLargeImage"),c=b.find(".fullscreen");U?b.css("cursor","url('"+K.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),
b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));S=!0;var d=x.find("#ivLargeImage");Y.left=d.width()-c.width();Y.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;X=[b.offset().left+e,b.offset().top+d];V.top=d-c.height()/2;V.left=e-c.width()/2;c.css({position:"relative",left:V.left,top:V.top});ca=Math.max(c.height()/b.height(),c.width()/b.width())}t(a);k.postCountMetric("dpcc_iv_largeImageCLick")}});x.delegate("#ivLargeImage","mousemove",function(a){S&&t(a)})}function G(){x.find("#ivLargeImage").empty()}
function D(a){if(y){x=d("#ivMain");m();I=B.getCurrentItem();g.populateTitle(x.find("#ivTitle"),160,K);g.populateVariationSelection(x.find("#ivVariationSelection"));a=x.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var b=O+C,c=0,f=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),k=0;4>k&&c<b;k++,c++,f++)if(f<O){var q=Q[c].thumb,p=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+
c).appendTo(h);p.find(".ivThumbImage").css("background",'url("'+g.getResizedThumbnailURL(q)+'") center no-repeat')}else f>=O&&f<C+O&&(q=R[c-O].thumb,p=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(c-O)).appendTo(h),p.find(".ivThumbImage").css("background",'url("'+g.getResizedThumbnailURL(q)+'") center no-repeat'));ba();y=!1}a=d("#ivImagesTab").height();x.css("height",a);b=x.find("#ivTitle").outerHeight(!0);c=x.find("#ivVariationSelection").outerHeight(!0);
f=x.find("#ivThumbs");h=g.getDimension(f,"margin-top")+g.getDimension(f,"margin-bottom");f.css("height",a-b-c-h);x.find("#ivLargeImage").css("height",a);a=x.find("#ivStage");b=x[0]&&x[0].getBoundingClientRect&&Math.floor(x[0].getBoundingClientRect().width)||x.width();a.css("width",b-g.getDimension(x,"padding-left")-g.getDimension(x,"padding-right")-x.find("#ivThumbColumn").width()-g.getDimension(a,"margin-left")-g.getDimension(a,"margin-right"));I=B.getCurrentItem();a="hero-image"===I.type?x.find("#ivHeroImage_"+
I.index):"image"===I.type?x.find("#ivImage_"+I.index):e.isDefined(Q)?x.find("#ivHeroImage_"+I.index):x.find("#ivImage_"+I.index);e.isjQueryObjDefined(a)||(a=x.find("#ivImage_0"));A(a)}var P,K,B,x,Q,R,O,C,I,U=navigator.userAgent.match(/msie|trident/i),y=!0,S=!1,M=!1,Y={},V={},ca,X,y=!0,ba=b.once(function(){w();E();g.attachImmersiveViewResizeHandler(D);g.attachTabDeselectHandler("ivImagesTab",G)});return function(a,b,c,e){P=this;K=a;B=b;P.render=function(a,b,c,e,f,h){y=!0;m();0===O+C?g.hideTabHeading("ivImagesTabHeading"):
g.unhideTabHeading("ivImagesTabHeading");1===O+C?d("#ivThumbs").hide():d("#ivThumbs").show()};P.update=function(a){};g.attachTabSelectHandler("ivImagesTab",D)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","preLoaderHook","lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(b,a,c,d,e,h,k,g,p,J){function L(){B.delegate(".ivThumb","click",function(){var a=d(this);B.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivThumbVideo")&&(x.type="chromeful-video",x.index=a.attr("id").split("_")[1])})}function v(){var a=d("#ivVideosTab").height();B.css("height",a);var b=B.find(".vse-video-block");R=a-g.getDimension(B,"padding-top")-g.getDimension(B,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(S)B.css({"max-width":Math.floor(1.77*R)});else{var a=B.find(".vse-airy-container"),b=B.find(".vse-ib-metadata"),c=Math.floor(R-g.getDimension(b,"height")),e=Math.floor(1.77*
c);a.css({"max-height":c,"max-width":e});b.css("max-width",e);M&&(a=B.find(".vse-vertical-scroll"),b=g.getDimension(a,"margin-top")+g.getDimension(a,"margin-bottom"),a.css("max-height",R-b))}}function H(){Q&&Q.pause();Q&&Q.pause();Y=!1;U=!0;I=null}function A(){Q&&Q.pause()}function w(a){I=a.clickTimeStamp;y&&(J.get(b,"#ivVideoBlock",K,ba,ha),B=d("#ivVideoBlock"),P.getCurrentItem(),x=P.getCurrentItem(),V());v();Y=!0;y=!1;E()}function z(a){y&&(B=d("#ivVideoBlock"),P.getCurrentItem(),x=P.getCurrentItem(),
V());Y&&E();v()}function t(a){Q=a.airy;Y&&Q.play({isAsync:!0})}function E(){if(Q&&(Q.play({isAsync:!0,eventTimestamp:I||(new Date).getTime()}),k.postCountMetric("dpcc_vse_videoBlock_video_played"),U)){var a=m.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,k.postTimeMetric("dpcc_vse_vitff",a),U=!1)}}var G,D,P,K,B,x,Q,R,O,C,I,U=!0,y=!0,S=!1,M=!1,Y=!1,V=b.once(function(){L();g.attachImmersiveViewResizeHandler(z);g.attachTabDeselectHandler("ivVideosTab",A);g.attachImmersiveViewResetHandler(H)}),
ca=function(a,b,c){d("#ivVideoBlockSpinner").addClass("aok-hidden");k.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=P.getCurrentItem().color;a=e.getVideoHash(a,0,D);Q||(Q=e.createAiryInstanceForChromeful(d("#ivVideoBlock"),a,D.airyConfig,"ImmersiveView"));S=!0;d("#ivVideoBlock").css({"max-width":1.77*R,margin:"0 auto"});Y&&S&&Q.play({isAsync:!0})},X=function(a,b,c){y||J.get(a,"#ivVideoBlock",K,ba,ha);d("#ivVideoBlockSpinner").addClass("aok-hidden")},ba=function(a,b,c){M=!0;
v();Y&&E()},ha=function(a,b,c){k.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,d,f){G=this;D=a;P=c;G.render=function(a,c,d,f,h,k){a=P.getCurrentItem().color;c=e.getVideoHash(a,0,D);O=D.colorToAsin[a]&&D.colorToAsin[a].asin;O=e.isDefined(O)?O:D.mediaAsin;C=null!==D.vseVideoDataSourceTreatment&&"T1"===D.vseVideoDataSourceTreatment?"ASIN":"physicalID";y=!0;-1===c?g.hideTabHeading("ivVideosTabHeading"):(g.unhideTabHeading("ivVideosTabHeading"),
K={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:O,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:C,videoURL:c.url,imageURL:c.slateUrl},metadata:{ProductTitle:D.title}},p.get(b,"#ivVideoBlock",K,X,ca))};G.update=function(a){};g.attachTabSelectHandler("ivVideosTab",w);b.on("vseAiry",t)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",
function(b,a,c,d,e,h,k,g){function N(a){M.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("iv360Image")&&J()}function J(){M.find("#ivLarge360").css("display","none");L();M.find("#ivLarge360").css("display","block");z();var a=M.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});g.animateStageIn(a)},200);H();k.postCountMetric("dppc_click360");aa=Date.now()}function L(){0<aa&&(v("dppc_duration360",Date.now()-aa),aa=0)}function v(a,b){m.ue&&m.ue.count(a,
b)}function H(){if(0<na){var a=M.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function A(a,b){if(na<a.length){var c=d("<img />").css({display:"block",width:6*X+"px",height:ba+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(na++,1===na&&(H(),0<aa&&v("dppc_loadTime360",Date.now()-aa)),0<ga&&v("dppc_perSpriteloadTime360",Date.now()-ga),M.find("#iv360Spinner").hide(),c.show(),pa=5*V.imageLocations[Math.floor(ua/V.imageLocations[0].length)][ua%
V.imageLocations[0].length],A(a,b))};c.attr("src",a[na].replace(/(\._SP)\d+(,)\d+/,"$1"+ma+"$2"+ha));ga=Date.now()}}function w(a){if(e.isDefined(V.spriteWidthSizes)&&0<V.spriteWidthSizes.length){var b=V.spriteWidthSizes,c=b.length,d=b[0],f=b[c-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function z(){var a=M.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,
width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",y.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),qa=!0,t())}function t(){if(e.isDefined(V.spriteURLs)&&e.isDefined(M)&&qa&&!ja){var a=M.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(V.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",V.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(y.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=V.imageWidth,c=V.imageHeight,f=a.parent().width(),h=a.parent().height(),k=0,g=0;b/c>f/h?(ma=w(f),ha=Math.round(c/b*ma),X=Math.ceil(f),ba=Math.ceil(ha/ma*f),g=(h-ba)/2):(ha=w(h),ma=Math.round(b/
c*ha),ba=Math.ceil(h),X=Math.ceil(ma/ha*h),k=(f-X)/2);a.css({"margin-left":k,"margin-top":g,width:X+"px",height:ba+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*X+"px");A(V.spriteURLs,M.find("#image-360-sprites"),0);b=M.find("#ivLarge360");b.bind("mousedown",P);b.bind("touchstart",E);b.bind("touchmove",G);b.bind("touchend",D);d(document).bind("mousemove",K);d(document).bind("mouseup",B);e.isDefined(y.staticImages.grab)&&a.css("cursor","url('"+y.staticImages.grab+
"'), auto");ja=!0}}function E(a){ka=!0;ea=a.originalEvent.targetTouches[0].clientX}function G(a){ka&&(x(a.originalEvent.targetTouches[0].clientX-ea),ea=a.originalEvent.targetTouches[0].clientX)}function D(a){ka&&(ka=!1)}function P(a){T=!0;sa=a.originalEvent.clientX;e.isDefined(y.staticImages.grabbing)&&(a=M.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+y.staticImages.grabbing+"'), auto"));return!1}function K(a){T&&
(x(a.originalEvent.clientX-sa),sa=a.originalEvent.clientX)}function B(a){T&&(T=!1,e.isDefined(y.staticImages.grab)&&(a=M.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function x(a){for(a=pa-=a/X*180;0>a;)a+=360;for(;360<a;)a-=360;pa=a;var b;a=360;for(var c=0;c<na;c++)for(var d=0;d<V.imageLocations[c].length;d++){var f=Math.abs(pa-5*V.imageLocations[c][d]);f<a&&(a=f,b=c*V.imageLocations[0].length+d)}b!==ua&&(a=Math.floor(b/
V.imageLocations[0].length),a!==Math.floor(ua/V.imageLocations[0].length)&&(e.isDefined(W)||(W=document.createElement("canvas").getContext("2d")),c=M.find("#image-360-sprites").children(),W.drawImage(c[a],0,0)),a=M.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ua=b;a=b%V.imageLocations[0].length*-1*X;b=-1*Math.floor(b/V.imageLocations[0].length)*ba;c=M.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform",
"translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function Q(){M.delegate(".ivThumb","click",function(){var a=d(this);N(a)})}function R(){L()}function O(a){if(u){M=d("#ivMain360");a=S.getCurrentItem().color;ca=I()&&y.spin360ColorEnabled[a];V=I()?y.spin360ColorData[a]:p;S.getCurrentItem();ca&&(Y=1);g.populateTitle(M.find("#ivTitle360"),160,y);g.populateVariationSelection(M.find("#ivVariationSelection360"));a=M.find("#ivThumbs360");a.find(".ivRow").not(".placeholder").remove();
for(var b=Y,c=0,f=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),k=0;3>k&&c<b;k++,c++,f++)f<Y&&a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(h).find(".ivThumbImage").css("background",'url("'+(e.isDefined(y.staticImages.icon360)?g.getResizedThumbnailURL(y.staticImages.icon360,!0):"")+'") center no-repeat');M.find("#ivLarge360").empty();na=0;u=ja=qa=!1;la();u=!1}a=d("#iv360Tab").height();
M.css("height",a);b=M.find("#ivTitle360").outerHeight(!0);c=M.find("#ivVariationSelection360").outerHeight(!0);f=M.find("#ivThumbs360");h=g.getDimension(f,"margin-top")+g.getDimension(f,"margin-bottom");f.css("height",a-b-c-h);a=M.find("#ivStage360");b=M[0]&&M[0].getBoundingClientRect&&Math.floor(M[0].getBoundingClientRect().width)||M.width();a.css("width",b-g.getDimension(M,"padding-left")-g.getDimension(M,"padding-right")-M.find("#ivThumbColumn360").width()-g.getDimension(a,"margin-left")-g.getDimension(a,
"margin-right"));S.getCurrentItem();a=M.find("#iv360");e.isDefined(a)&&0!==M.height()&&(e.isjQueryObjDefined(a)||(a=M.find("#ivImage_0")),N(a))}function C(a){var b=y.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var f="360"+b.asin,l=Date.now();c.success=function(b){v("dppc_asyncRequestTime360",Date.now()-l);b&&e.isDefined(b.spin360.spin360Model)?(e.ajaxState(f,"success"),y.spin360ColorData[a]=b.spin360.spin360Model,a===S.getCurrentItem().color&&(V=y.spin360ColorData[a],t())):c.error()};
c.error=function(){k.postCountMetric("dppc_asyncFailed360");v("dppc_asyncRequestTime360",Date.now()-l);d*=2;16E3>=d?setTimeout(function(){l=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",c)},d):e.ajaxState(f,"fail")};e.ajaxState(f)&&"fail"!==e.ajaxState(f)||(h.load("/gp/product/features/apparel-main-image/360.html",c),e.ajaxState(f,"sent"))}}function I(){return e.isDefined(y.spin360ConfigEnabled)&&y.spin360ConfigEnabled}var U,y,S,M,Y,V,ca,X,ba,ha,ma,sa,ea,qa=!1,ja=!1,pa=0,ua=
0,aa=0,ga=0,T=!1,ka=!1,na=0,W,u=!0,la=b.once(function(){Q();g.attachImmersiveViewResizeHandler(O);g.attachTabDeselectHandler("iv360Tab",R)});return function(a,c,f,h){U=this;y=a;S=c;I()&&(y.spin360ColorData[y.landingAsinColor]=y.spin360ColorData[y.defaultColor],y.spin360ColorEnabled[y.landingAsinColor]=y.spin360ColorEnabled[y.defaultColor]);e.isDefined(y.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",g.addStyleCodeToURL(y.staticImages.icon360,
"_FMpng_RI_"));U.render=function(a,c,f,h,m,p){u=!0;I()&&y.spin360ColorEnabled[a]?(e.isDefined(y.spin360ColorData[a])||(y.spin360ColorData[a]={},C(a)),d("#ivThumbs360").hide(),g.unhideTabHeading("iv360TabHeading")):g.hideTabHeading("iv360TabHeading");e.isImmersiveViewEnabled(y,S.getCurrentItem().color)&&I()&&y.spin360ColorEnabled[a]&&(c===y.maxAlts&&(a=h.find(".item.imageThumbnail"),f=h.find(".item.videoThumbnail"),e.isDefined(f)&&1<f.length?f.last().remove():a.last().remove(),c--),a=h.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
b.declarative.create(a,"button-360-click"),h.append(a),c++,k.postCountMetric("dppc_display360"));return c};U.update=function(a){};g.attachTabSelectHandler("iv360Tab",O)}});var e=m.location.host,c={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},d=e.split(".")[1],k=-1===e.indexOf(".proxy.amazon.com")?"/vap/ew/":c[d]!==p?c[d]:"https://www.amazon.com/vap/ew/";g.when("postMetric").register("preLoaderHook",function(b){function a(c,d){var e=c.A,h=c.block,g=c.request,
m=c.handleFailure,p=c.handleSuccess,J=d,L=e.$;d--;var v=J-d-1,H=(new Date).getTime();e.ajax(k+"componentbuilder",{params:g,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:g.timeout||4E3,withCredentials:!0,success:function(a){var c=(new Date).getTime()-H;b.postTimeMetric("vse_preLoaderHook:success:",c);b.postCountMetric("vse_preLoaderHook:success:"+g.page+":"+g.placement+":"+v);L(h).html(a);p(e,g,a)},error:function(h){(0===h.http.status||500<=h.http.status&&
599>=h.http.status)&&0<d?(b.postCountMetric("vse_preLoaderHook:error:"+g.page+":"+g.placement+":"+v),a(c,d)):m(e,g,h)}})}return{get:function(b,c,d,e,k){a({A:b,block:c,request:d,handleFailure:k,handleSuccess:e},3)}}});g.when("postMetric").register("lazyLoaderHook",function(b){function a(c,d,e){var h=c.A,g=c.context,m=c.handleFailure,p=c.handleSuccess;d.attr("data-configuration");var J=atob(d.attr("data-configuration")),L=JSON.parse(J),J=e,v={pageContext:g,configuration:L},H=(new Date).getTime();e--;
var A=J-e-1;h.ajax(k+"subcomponent/"+L.type,{params:v,paramsFormat:"json",method:"post",contentType:"application/json",timeout:g.timeout||4E3,withCredentials:!0,success:function(a){var c=(new Date).getTime()-H;b.postTimeMetric("vse_lazyLoaderHook:success:",c);b.postCountMetric("vse_lazyLoaderHook:success:"+g.page+":"+g.placement+":"+L.type+":"+A);d.html(a);p(h,v,a)},error:function(k){(0===k.http.status||500<=k.http.status&&599>=k.http.status)&&0<e?(b.postCountMetric("vse_lazyLoaderHook:error:"+g.page+
":"+g.placement+":"+L.type+":"+A),a(c,d,e)):m(h,v,k)}})}return{get:function(b,c,d,e,k){var g=b.$;g(c+" div[data-configuration]").each(function(){a({A:b,context:d,handleFailure:k,handleSuccess:e},g(this),3)})}}})});
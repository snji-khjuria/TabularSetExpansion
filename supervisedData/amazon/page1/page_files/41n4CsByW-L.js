(function(g){var n=window.AmazonUIPageJS||window.P,t=n._namespace||n.attributeErrors,a=t?t("AskAuiAssets"):n;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,n,t){g.when("jQuery","ready").execute(function(a){a("body").delegate(".askInlineWidget .cdShowLess, .askInlineWidget .cdReadMore","click touchstart",function(b){b.preventDefault();a(b.target).parents(".cdJSEnabledText").toggleClass("askShowMore")})});g.when("jQuery","load").execute(function(a){var b=a(".askSubHeader");
0<b.length&&!n.pageYOffset&&a("html, body").animate({scrollTop:b.offset().top},0)});g.when("jQuery","ready").execute(function(a){function b(){return a(n).scrollTop()+5>=a(document).height()-a(n).height()}function f(){b()&&e()}function c(){a("body").hasClass("allAnswersScrolling")?a(document).scroll(f):(a(".loadMoreAnswersMobile").show(),a(".loadMoreAnswersMobile").bind("touchstart click",e))}function e(){var k=a(".answersLoadingSpinner"),m=a(".loadMoreAnswersMobile"),p=a.trim(a(".askPage input[name=askQuestion]").val()),
q=a.trim(a(".askPage input[name=askSort]").val()),r=a(".askPage input[name=askLanguage]").val(),g=a(".askPage input[name=askAsin]").val(),p="/ask/answers/inline/"+p+"/"+l+"?pageSize=6&sort="+q+"&language="+r;g!==t&&(p+="&asin="+g);k.show();m.hide();a(".askMobileFailedToFetchMoreAnswers").hide();a(document).unbind("scroll",f);m.unbind("touchstart click",e);a.ajax({url:p,data:{},dataType:"html",cache:!1,timeout:2E3,success:function(f){k.hide();a(".askPage .answerBox").append(f);d&&(b()?e():d=!1);"true"===
a.trim(a("input[name=moreAnswersAfterPage"+l+"]").val())?c():a(".loadMoreAnswersMobile").hide();a(document).trigger("ajax:success");l+=1},error:function(){k.hide();a(".askMobileFailedToFetchMoreAnswers").show();c()}})}var d=!0,l=3;a("body").hasClass("allAnswersScrolling")&&(b()?e():d=!1,a(document).scroll(f));a(".loadMoreAnswersMobile").bind("touchstart click",e)});g.when("jQuery","ready").execute(function(a){var b=!0;a("body").delegate(".askQuestionForm","submit",function(c){c=a(c.currentTarget);
var e=c.find("[name='askQuestionText']"),d=e.val(),e=e.attr("placeholder");if("undefined"===typeof d||d.match(/^\s*$/)||d===e)return c.attr("class","askQuestionForm hasEmptyQuestion"),!1;if(b)return b=!1,e=f,d=0<=d.indexOf("?"),e(c,d),!1;c.attr("class","askQuestionForm");return!0});var f=function(a,b){b?a.trigger("submit"):a.attr("class","askQuestionForm hasBadQuestion")}});g.when("jQuery","ready").register("askPostQuestionValidation",function(a){function b(b){var l=a(b.currentTarget),p=e.val(),q=
e.attr("placeholder");a(".askError").hide();return"undefined"===typeof p||p.match(/^\s*$/)||p===q?(d.show(),b.stopImmediatePropagation(),!1):c?(c=!1,q=f,p=0<=p.indexOf("?"),q(l,p),b.stopImmediatePropagation(),!1):!0}function f(a,b){b?a.trigger("submit"):l.show()}var c=!0,e,d=a(".askEmptyQuestionError"),l=a(".askBadQuestionError");return{setup:function(a,c,d){e=d;a.delegate(c,"submit",b)}}});g.when("jQuery","askHuddlesControl","ready").execute(function(a,b){function f(c){var e="/ask/questions/inline/"+
a.trim(a(".askWidgetQuestions input.askAsin").val())+"/"+c;a.ajax({url:e,data:{},dataType:"html",cache:!1,timeout:5E3,success:function(d){a(".askInlineWidget .askFailedToFetchMoreQuestions").hide();a(".askInlineWidget .askLoadMoreQuestions").hide();a(".askInlineWidget .askMoreQandAResults").append(d);a(".askInlineWidget .askTopQandALoadMoreQuestions").hide();d=c+1;a(".askWidgetQuestions input.nextPage").val(d);d=document.getElementById("askInlineQuestionsPage-"+c);var e;if(e="undefined"!==typeof d&&
null!==d)e=d.getBoundingClientRect(),e=!(0<=e.top&&0<=e.left&&e.bottom<=(n.innerHeight||a(n).height())&&e.right<=(n.innerWidth||a(n).width()));if(e){e=0;do e+=d.offsetTop||0,d=d.offsetParent;while(d);d=e;a("html, body").animate({scrollTop:d},"slow")}b.initializeHuddlesLinks(a(".askInlineWidget .askMoreQandAResults"),"dp")},error:function(){a(".askInlineWidget .askFailedToFetchMoreQuestions").show()}})}a("body").delegate(".askInlineWidget .askSeeMoreQuestionsLink","click",function(a){f(2);a.preventDefault()});
a("body").delegate(".askInlineWidget .askLoadMoreQuestionsLink","click",function(b){var e=parseInt(a(".askWidgetQuestions input.nextPage").val(),10)||0;0<e&&(f(e),b.preventDefault())})});g.when("jQuery","ready").execute(function(a){function b(b){b=document.getElementById(b);var c;if(c="undefined"!==typeof b&&null!==b)c=b.getBoundingClientRect(),c=!(0<=c.top&&0<=c.left&&c.bottom<=(n.innerHeight||a(n).height())&&c.right<=(n.innerWidth||a(n).width()));if(c){c=0;do c+=b.offsetTop||0,b=b.offsetParent;
while(b);b=c;a("html, body").animate({scrollTop:b},"slow")}}function f(){var b=a(".askQuestionForm input.askAsin").val();return b&&0!==b.length?"?asin="+b:""}function c(c,d){if(c){var m=f();a.ajax({url:"/ask/answers/inline/"+c+"/"+d+m,data:{},dataType:"html",cache:!1,timeout:5E3,success:function(f){a(".askInlineWidget #failed-to-fetch-answers-"+c).hide();a(".askInlineWidget #askSeeAllAnswersLink-"+c).hide();a(".askInlineWidget .askCollapseAnswers-"+c).show();a(".askInlineWidget .askLoadMoreAnswersLink-"+
c).hide();a(".askInlineWidget #"+c).show();a(".askInlineWidget #"+c).append(f);e(c,d);b("askInlineAnswersPage-"+c+"-"+d)},error:function(){a(".askInlineWidget #failed-to-fetch-answers-"+c).show()}})}}function e(b,c){a(".askWidgetQuestions input.currentAnswersPage-"+b).val(c)}function d(c){b("question-"+c);setTimeout(function(){a(".askInlineWidget #"+c).empty();a(".askInlineWidget .askCollapseAnswers-"+c).hide();a(".askInlineWidget #failed-to-fetch-answers-"+c).hide();a(".askInlineWidget #askSeeAllAnswersLink-"+
c).show()},500);e(c,1)}a("body").delegate(".askInlineWidget .askWidgetSeeAllAnswersInline","click",function(b){var d=a(b.currentTarget).attr("data-questionId");c(d,1);b.preventDefault()});a("body").delegate(".askInlineWidget .askWidgetLoadMoreAnswersInline","click",function(b){var d=a(b.currentTarget).attr("data-questionId"),e=parseInt(a(".askWidgetQuestions input.currentAnswersPage-"+d).val(),10)||0;0<e&&(c(d,e+1),b.preventDefault())});a("body").delegate("input[name='collapse-to-most-helpful-answer']",
"click",function(b){b=a(b.currentTarget).attr("data-questionId");d(b)})});g.when("jQuery","ready").register("askAuthenticatedAjax",function(a){return{handler:function(b,f){var c=a(b.currentTarget),e=c.attr("action"),d=c.attr("method"),l=c.serializeArray(),k=c.attr("type"),e={url:e,type:d,data:l,dataType:k,timeout:f,beforeSend:function(b,d){d.dataType===t&&b.setRequestHeader("Accept","*/*;q=0.5, "+d.accepts.script);b.setRequestHeader("X-Requested-With","XMLHttpRequest");var e=a.Event("ajax:beforeSend");
c.trigger(e,[b,d]);if(!1!==e.result)c.trigger("ajax:send",b);else return!1},success:function(a,b,d){c.trigger("ajax:success",[a,b,d])},complete:function(a,b){c.trigger("ajax:complete",[a,b])},error:function(a,b,d){c.trigger("ajax:error",[a,b,d])}};if(!("withCredentials"in new XMLHttpRequest))return!0;e.xhrFields={withCredentials:!0};b.preventDefault();a.ajax(e)}}});g.when("jQuery","askAbstractLiveSearch","ready").register("askLiveSearch",function(a,b){return{setup:function(a,c,e){b.setup(a,c,e,"/ask/livesearch/search")}}});
g.when("askAbstractLiveSearch","ready").register("askDetailPageSearchLiveSearch",function(a){return{setup:function(b,f,c){a.setup(b,f,c,"/ask/livesearch/detailPageSearch/search")}}});g.when("jQuery","ready").register("askAbstractLiveSearch",function(a){function b(a){return"function"!==typeof a?function(){}:a}var f=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}();return{setup:function(c,
e,d,l){function k(b){D();clearTimeout(p);m=a.ajax(l,{type:"GET",data:{query:b,asin:x,forumId:B,liveSearchSessionId:r,liveSearchPageLoadId:g,searchSource:y,askLanguage:a.trim(w.find("[name=askLanguage]").val())}}).done(t).fail(h);q=b}var m,p,q,r=null,g=null,y=null,n=c.find(e),w=n.closest("form"),v=c.find(".askLiveSearchSessionId"),A=w.children("input[name=searchSource]"),x=a.trim(w.children("input.askAsin").val()),B=a.trim(w.children("input.askForumId").val()),y=a.trim(w.children("input[name=searchSource]").val()),
D=b(d.liveSearchStartCallback),t=b(d.liveSearchDoneCallback),C=b(d.liveSearchClearCallback),h=b(d.liveSearchFailCallback);c.undelegate(".livesearch").delegate(e,"keyup.livesearch input.livesearch",function(){var b=n.val(),c=a.trim(b);clearTimeout(p);if(c!==q){null===r&&(r=f(),v.val(r));g=a(".askLiveSearchPageLoadId").val();if(null===g||""===g)g=f(),a(".askLiveSearchPageLoadId").val(g);y=a.trim(A.val());0===c.length?(C(),m&&m.abort(),r=q=null):b.match(/\w\W+$/)?k(c):p=setTimeout(function(){k(c)},500)}})}}});
g.when("A","ready").register("askAbstractDetailPageSearchPostQuestion",function(a){function b(b,c,f){a.get("/gp/customer-forum/dynamic-update/validate-post.html",{contentType:"json",params:{body:b,checkIsQuestion:1},success:function(a){a.hasError||a.content.isQuestion?c():f()},error:function(){c()}})}var f=a.$,c={postQuestionTextInputSelector:"input",callbacks:{goodQuestion:function(){},badQuestion:function(){},emptyQuestion:function(){}}};return{setup:function(e,d){function l(){k.callbacks.badQuestion();
m=!0}var k=f.extend(!0,{},c,d),m=!1;a.declarative(e,"click",function(){var a=f(k.postQuestionTextInputSelector).val();"undefined"===typeof a||a.match(/^\s*$/)?k.callbacks.emptyQuestion():m?k.callbacks.goodQuestion():-1===a.indexOf("?")?l():b(a,k.callbacks.goodQuestion,l)})}}});g.when("A","a-alert","ready").register("askAnswerSolicitationDeleteAnswer",function(a,b){function f(b){return a.$("#askDeleteAnswerSection-"+b.data.answerId)}return{setup:function(c){var e=a.$("#askPostAnswerFormSection-"+c),
d=a.$("#askPostAnswerForm-"+c),l=a.$("#askPostAnswerResponse-"+c);a.declarative("ask-show-delete-answer-section","click",function(a){f(a).show()});a.declarative("ask-hide-delete-answer-section","click",function(a){f(a).hide()});a.declarative("ask-submit-delete-answer-form","click",function(c){c=c.data.answerId;var f=a.$("#askDeleteAnswerForm-"+c),p=a.$("#askAnswerContentSection-"+c),q=a.$("#askUpdateAnswerSection-"+c),r=b("#askDeleteAnswerError-"+c);r.hide();q.hide();a.post(f.attr("action"),{withCredentials:!0,
params:f.serializeArray(),indicator:a.$("#askDeleteAnswerSpinner-"+c),success:function(a,b,c){l.hide();p.hide();e.show();d.show()},error:function(a){r.html(a.http.responseText).show();q.show()}})})}}});g.when("jQuery","ready").register("askExpander",function(a){return{setup:function(b){b.delegate(".askExpanderContainer .askSeeMore","click",function(b){a(b.currentTarget).closest(".askExpanderContainer").addClass("askExpanderExpanded");b.preventDefault()});b.delegate(".askExpanderContainer .askSeeLess",
"click",function(b){a(b.currentTarget).parents(".askExpanderContainer").removeClass("askExpanderExpanded");b.preventDefault()})}}});g.when("A").register("askPreventEnterKey",function(a){a.declarative("ask-prevent-enter-key","keypress",function(a){13===a.$event.which&&a.$event.preventDefault()})});g.when("A","askUtils","ready").register("askPreventDoubleSubmit",function(a,b){return{idempotentSetup:b.makeIdempotent(function(){var b=!1;a.declarative("ask-prevent-double-submit","submit",function(a){b&&
a.$event.preventDefault();b=!0})})}});g.when("A","ready").register("askHuddlesControl",function(a){return{initializeHuddlesLinks:function(b,f){var c={};b.find(".askHuddlesUninitializedLink").each(function(b){b=a.$(this);var e=b.data("questionId");c[e]=b});var e=a.$.map(c,function(a,b){return b});0!==e.length&&a.$.ajax({url:"/ask/conversations/data",data:{questionId:e,sourcePage:f},timeout:5E3,traditional:!0,success:function(d){if(d=a.$.parseJSON(d))a.$.each(d,function(b,d){if(d.questionId&&c[d.questionId]){var e=
c[d.questionId];d.url&&(e.find("a").attr("href",d.url),e.removeClass("askHuddlesUninitializedLink"),d.chatboxParams&&a.declarative.create(e.find("a"),"render-huddles-chat",d.chatboxParams))}}),b.find(".askHuddlesUninitializedLink").remove()},complete:function(){a.trigger("ask:huddles-data:complete")}})},initializeChatbox:function(){g.when("A","huddles-chatbox").execute(function(a,f){a.declarative("render-huddles-chat","click",function(c){f.renderHuddleChat(a.$.extend({},c.data,{showEmbedded:!1}));
c.$event.preventDefault()})})}}});g.register("askCsmCounter",function(){function a(a){if("undefined"!==typeof a){var f=n.ue;if(f&&f.count){var c=f.count(a)||0;f.count(a,c+1)}}}return{logCounterMetric:a,createRateLimitedCsmLogHandler:function(b){var f=!1;return function(){f||(f=!0,setTimeout(function(){f=!1},300),a(b))}}}});g.when("A","jQuery","ready").register("askPrefetchDetailPageSearchData",function(a,b){return{setup:function(){var b,c={};a.declarative("ask-detail-page-search-prefetch-click","click touchstart",
function(e){var d=b||e.data.language;if(!c[d||"DEFAULT_KEY"]){e=e.data.asin;var l={};d&&(l.askLanguage=d);a.post("/ask/livesearch/detailPageSearch/search/prefetch/"+e,{params:l})}c[d||"DEFAULT_KEY"]=!0});a.declarative("ask-detail-page-search-prefetch-language-change","change",function(a){b=a.$target.val()})}}});g.when("A","ready").register("askUtils",function(a){var b=a.$,f=[];return{makeIdempotent:function(a){var b=!1;return function(){b||(a.apply(this,arguments),b=!0)}},makeRateLimited:function(a,
e){var d=!1,f=b.extend(!0,{},{minPeriodInMilliseconds:2E3},e);return function(){d||a.apply(this,arguments);d=!0;setTimeout(function(){d=!1},f.minPeriodInMilliseconds)}},idempotentDeclarative:function(b,e,d){function l(b,c,d){var e;a.declarative(b,c,function(a){e===t&&(e=a.type);a.type===e&&d(a)})}var k=b+e;f[k]||("click touchstart"===e||"touchstart click"===e?l(b,e,d):a.declarative(b,e,d),f[k]=!0)},goToUrl:function(a){n.location.href=a}}});g.when("A","askCsmCounter","askUtils","ready").register("askLogClickCsm",
function(a,b,f){return{idempotentSetup:function(){f.idempotentDeclarative("ask-log-click-csm","click touchstart",function(a){b.logCounterMetric(a.data.metricName)})}}});g.when("A","askUtils","ready").register("askFollowupQuestions",function(a,b){function f(a){var b=e(".askDetailPageSearchWidgetSection");b.length&&(b=b.offset().top,e("html, body").animate({scrollTop:b},"slow"));b=e(".askDPSearchTextInput input, input.askDPSearchTextInput");b.val("").trigger("input");var f=e(".askDPSearchForm [name=followupSearchSource]").val();
c(f);a=e.trim(a.$currentTarget.text());b.val(a).trigger("input")}function c(a){var b=e(".askDPSearchForm"),c=b.siblings(".askPostQuestionForm");b.add(c).find("[name=searchSource]").val(a)}var e=a.$;return{idempotentSetup:function(){b.idempotentDeclarative("ask-click-followup-question","click",f)},resetSWDPSearchSource:function(){var a=e(".askDPSearchForm [name=originalSearchSource]").val();c(a)}}});g.when("A","askUtils","ready").register("askLanguageFilter",function(a,b){return{idempotentSetup:b.makeIdempotent(function(){a.declarative("ask-page-reload-on-language-filter-change",
"change",function(a){a=a.$currentTarget.find("option:selected").data("url");b.goToUrl(a)})})}});g.when("A","a-alert","ready").register("askUpperFunnelQuestionPostAnswer",function(a,b){return{setup:function(f){var c=a.$("#askPostAnswerFormSection-"+f),e=a.$("#askPostAnswerForm-"+f),d=a.$("#askAnswerTextArea-"+f),l=a.$("#askPostAnswerResponse-"+f),k=a.$("#askPostAnswerSpinner-"+f),m=b("#askPostAnswerError-"+f);a.declarative.create(e,"ask-post-answer-submit");a.declarative("ask-post-answer-submit","submit",
function(b){b.$event.preventDefault();c.children().hide();a.post(e.attr("action"),{withCredentials:!0,params:e.serializeArray(),indicator:k,success:function(a,b,c){l.html(a);l.show();d.val("")},error:function(b){401===b.http.status||409===b.http.status?(a.declarative.remove(e,"ask-post-answer-submit"),e.submit()):(e.show(),m.html(b.http.responseText).show())}})});a.declarative("ask-submit-delete-answer-form","click",function(d){d=d.data.answerId;var f=a.$("#askDeleteAnswerForm-"+d),k=a.$("#askAnswerContentSection-"+
d),m=a.$("#askUpdateAnswerSection-"+d),g=b("#askDeleteAnswerError-"+d);g.hide();m.hide();a.post(f.attr("action"),{withCredentials:!0,params:f.serializeArray(),indicator:a.$("#askDeleteAnswerSpinner-"+d),success:function(a,b,d){l.hide();k.hide();c.show();e.show()},error:function(a){g.html(a.http.responseText).show();m.show()}})})}}});g.when("A","askUtils","ready").register("askUpperFunnelQuestionRedirect",function(a,b){return{setup:function(f){var c=a.$("#redirectDelay"),e=c.data("message"),d=10,l=
setInterval(function(){d--;var a=e.replace("##delay##",d);c.text(a);0===d&&(clearInterval(l),b.goToUrl(f))},1E3);a.declarative("ask-redirect-to-spark-action","click",function(a){b.goToUrl(f)})}}});g.when("A","jQuery","askVoteControl","askExpander","askLiveSearch","askHuddlesControl","askCsmCounter","askPreventDoubleSubmit","askLanguageFilter","ready").register("askDetailPageWidget",function(a,b,f,c,e,d,l,k,m){function p(a){a.delegate(".askInlineWidget .askLiveSearchEnabled","keypress",function(a){13===
(a.keyCode||a.which)&&a.preventDefault()})}var q={liveSearchStartCallback:function(){b(".askLiveSearchLoading").show()},liveSearchDoneCallback:function(a){b(".askInlineWidget .askMoreQandAResults").empty();b(".askWidgetQuestions input.nextPage").val(2);b(".askInlineWidget .askTopQandALoadMoreQuestions").hide();b(".askLiveSearchLoading").hide();b(".askLiveSearchResults").html(a);b(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchShow");b(".askInlineWidget .askQuestionExamples").hide();
b(".askQuestionForm").attr("class","askQuestionForm");b(".askPostQuestionButtonContainer").show();b(".askLiveSearchSuccessfulMessage").show();b(".askLiveSearchFailureMessage").hide()},liveSearchClearCallback:function(){b(".askLiveSearchLoading").hide();b(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchHide");b(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();b(".askPostQuestionButtonContainer").hide()},liveSearchFailCallback:function(){b(".askLiveSearchLoading").hide();
b(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchHide");b(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();b(".askPostQuestionButtonContainer").show();b(".askLiveSearchSuccessfulMessage").hide();b(".askLiveSearchFailureMessage").show()}};return{setup:function(){var r=b("#cf-ask-cel");k.idempotentSetup();m.idempotentSetup();f.setup(r);c.setup(r);p(r);e.setup(r,".askInlineWidget .askLiveSearchEnabled",q);d.initializeHuddlesLinks(r,
"dp");(function(){var c=l.createRateLimitedCsmLogHandler("ask-btf-desktop-input-click");a.declarative("ask-btf-desktop-input-click","click touchstart",c);c=l.createRateLimitedCsmLogHandler("ask-btf-desktop-input-focusin");a.declarative("ask-btf-desktop-input-focusin","focusin",c);a.declarative("ask-btf-desktop-input-change","change",function(){l.logCounterMetric("ask-btf-desktop-input-change")});a.declarative("ask-btf-desktop-input-keyup","keyup",function(){l.logCounterMetric("ask-btf-desktop-input-keyup")});
a.declarative("ask-btf-search-link-click","click",function(){l.logCounterMetric("ask-btf-desktop-search-link-click");b(".ask-btf-search-link").addClass("aok-hidden");b(".ask-btf-search-box").removeClass("aok-hidden")})})()}}});g.when("jQuery","askVoteControl","askExpander","askHuddlesControl","askPreventDoubleSubmit","ready").register("askAllQuestionsPage",function(a,b,f,c,e){return{setup:function(){e.idempotentSetup();b.setup(a(".askTeaserQuestions"));f.setup(a(".askTeaserQuestions"));c.initializeHuddlesLinks(a(".askTeaserQuestions"),
"ql");c.initializeChatbox()}}});g.when("jQuery","askDesktopAnswerSolicitationPostAnswer","askAnswerSolicitationDeleteAnswer","askExpander","ready").register("askAnswerSolicitationLandingPage",function(a,b,f,c){return{setup:function(e){b.setup(e);f.setup(e);c.setup(a(".askTestQuestion"))}}});g.when("jQuery","askExpander","askHuddlesControl","ready").register("askDesktopAllAnswersPage",function(a,b,f){return{setup:function(){b.setup(a(".askAnswersAndComments"));f.initializeChatbox()}}});g.when("A",
"askPrefetchDetailPageSearchData","askDetailPageSearchLiveSearch","askDesktopTabbing","askExpander","askDesktopDetailPageSearchPostQuestion","askDesktopDetailPageSearchCsm","askFollowupQuestions","askCsmCounter","ready").register("askDesktopDetailPageSearchWidget",function(a,b,f,c,e,d,l,k,m){var p=a.$;return{setup:function(){var q=p(".askSearchResultsContainer"),r=p(".askSearchTabHeaders"),g=p(".askDPSearchForm"),y=p(".askDPSearchFailureMessage"),n=p(".askPostQuestionPromptContainer"),w=p(".askDPSearchQuestionErrorContainer"),
v=p(".askDPSearchSearchIndicator"),A=p(".askDPSearchResultsViewableContent"),x=null;f.setup(g,".askDPSearchTextInput",{liveSearchStartCallback:function(){w.children().hide();v.removeClass("aok-hidden");v.show()},liveSearchDoneCallback:function(a){A.removeClass("aok-hidden");q.html(a);r.show();n.show();y.hide();v.hide();c.switchToTab(0);var b=g.find(".askLiveSearchSessionId").val();-1!==a.indexOf("askFollowupQuestion")&&b!==x&&(x=b,m.logCounterMetric("ask-desktop-followup-question-present"))},liveSearchClearCallback:function(){k.resetSWDPSearchSource();
q.empty();r.hide();n.hide();y.hide();v.hide();w.children().hide()},liveSearchFailCallback:function(){q.empty();r.hide();n.hide();v.hide();y.show()}});b.setup();c.setup();e.setup(q);d.setup();l.setup();k.idempotentSetup();(function(){a.declarative("ask-dpsearch-desktop-input-binding-language-change","change",function(){p(".askDPSearchTextInput").val("").trigger("input")})})()}}});g.when("jQuery","askExpander","ready").register("askDesktopSingleAnswerPage",function(a,b){return{setup:function(){b.setup(a(".askAnswerAndComments"))}}});
g.when("jQuery","askUpperFunnelQuestionPostAnswer","askExpander","ready").register("askDesktopUpperFunnelQuestionLandingPage",function(a,b,f){return{setup:function(c){b.setup(c);f.setup(a(".askTestQuestion"))}}});g.when("A").execute(function(a){a.on("a:dropdown:selected:question_order_dropdown",function(a){n.location=a.value})});g.when("jQuery","ready").execute(function(a){"placeholder"in document.createElement("textarea")||a(".askQuestionForm textarea").each(function(){""===a(this).val()&&""!==a(this).attr("placeholder")&&
a(this).val(a(this).attr("placeholder"));a(this).focus(function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")});a(this).blur(function(){""===a(this).val()&&a(this).val(a(this).attr("placeholder"))})})});g.when("jQuery","askAuthenticatedAjax","ready").register("askVoteControl",function(a,b){return{setup:function(f){f.undelegate(".voteAjax form","submit",b.handler);f.undelegate(".voteAjax form","ajax:beforeSend");f.undelegate(".voteAjax form","ajax:send");f.undelegate(".voteAjax form",
"ajax:error");f.undelegate(".voteAjax form","ajax:success");f.delegate(".voteAjax form","submit",b.handler);f.delegate(".voteAjax form","ajax:beforeSend",function(b,e){var d=a(b.currentTarget),f=d.closest(".voteAjax");if(f.hasClass("up")&&d.hasClass("up")||f.hasClass("down")&&d.hasClass("down"))return b.preventDefault(),e.abort(),!1});f.delegate(".voteAjax form","ajax:error",function(c,e){if(401===e.status||466===e.status)f.undelegate(".voteAjax form","submit",b.handler),a(c.currentTarget).trigger("submit")});
f.delegate(".voteAjax form","ajax:success",function(b){b=a(b.currentTarget);var e=b.closest(".voteAjax"),d=e.find(".label"),f=e.find(".count"),k=b.hasClass("up")?1:-1,k=parseInt(d.attr("data-count"),10)+k;d.attr("data-count",k);f.text(""+k);e.attr("class","vote voteAjax "+b.attr("class"))})}}});g.when("A","ready").register("askDesktopTabbing",function(a){function b(a){(function(a){var b=c(".askSearchResultsHeader");a=c(b.get(a));b.removeClass("askSearchResultsHeaderActive");a.addClass("askSearchResultsHeaderActive")})(a);
(function(a){var b=c(".askSearchResults");a=c(b.get(a));b.removeClass("askSearchResultsActive");a.addClass("askSearchResultsActive")})(a)}function f(){a.declarative("ask-dpsearch-desktop-go-to-tab","click",function(a){c(".askSearchResultsHeader").index(a.$target);b(a.data.index)})}var c=a.$;return{setup:function(){f()},switchToTab:b}});g.when("A","askAbstractDetailPageSearchPostQuestion","askUtils","ready").register("askDesktopDetailPageSearchPostQuestion",function(a,b,f){var c=a.$;return{setup:function(){var a=
c(".askDPSearchForm"),d=c(".askDPSearchQuestionErrorContainer"),l=d.find(".askBadQuestionError"),k={postQuestionTextInputSelector:"input.askDPSearchTextInput",callbacks:{goodQuestion:f.makeRateLimited(function(){a.submit()},{minPeriodInMilliseconds:2E3}),badQuestion:function(){d.children().hide();l.show()}}};b.setup("ask-dpsearch-desktop-post-question",k)}}});g.when("A","askCsmCounter","askLogClickCsm","ready").register("askDesktopDetailPageSearchCsm",function(a,b,f){return{setup:function(){a.declarative("ask-dpsearch-desktop-input-change",
"change",function(){b.logCounterMetric("ask-dpsearch-desktop-input-change")});a.declarative("ask-dpsearch-desktop-input-keyup","keyup",function(){b.logCounterMetric("ask-dpsearch-desktop-input-keyup")});var c=b.createRateLimitedCsmLogHandler("ask-dpsearch-desktop-input-click");a.declarative("ask-dpsearch-desktop-input-click","click touchstart",c);c=b.createRateLimitedCsmLogHandler("ask-dpsearch-desktop-input-focusin");a.declarative("ask-dpsearch-desktop-input-focusin","focusin",c);f.idempotentSetup()}}});
g.when("A","jQuery","ready").register("askModerationControl",function(a,b){function f(a,b){var c="";b.forEach(function(b){c+=a.replace(/##marketplace##/g,b.marketplace||"").replace(/##uri##/g,b.uri||"").replace(/##subject##/g,(b.subject||"").id).replace(/##text##/g,b.text||"").replace(/##author##/g,b.actorId||"").replace(/##submitDate##/g,b.submitDate||"").replace(/##contentState##/g,b.contentState||"").replace(/##moderationState##/g,b.moderationState||"")});return c}function c(a,b){var c="";b.forEach(function(b){c+=
a.replace(/##marketplace##/g,b.marketplace||"").replace(/##uri##/g,b.uri||"").replace(/##subject##/g,b.questionUri||"").replace(/##text##/g,b.text||"").replace(/##author##/g,b.actorId||"").replace(/##submitDate##/g,b.submitDate||"").replace(/##contentState##/g,b.contentState||"").replace(/##moderationState##/g,b.moderationState||"")});return c}function e(a){a=a.serializeArray();var c={};b.map(a,function(a,b){c[a.name]=a.value});return c}return{setup:function(d){function l(){var b=e(d.find("#byCustomerForm"));
if(p(b,["customerId","type"])){var l=b.type,k;a:switch(l){case "questions":k=d.find("#questionResultTable");break a;case "answers":k=d.find("#answerResultTable");break a;default:k=null}var h="answers"===l?c:f;a.get("/ask/moderator/searchByCustomer/"+l,{params:b,success:function(a){var b=v(a.items,"uri");C.val(a.nextPageToken||"");k.find("tbody").append(h(B,b)).parent().show()},error:x})}}function k(b,l){var k=e(d.find("#byThreadForm"));p(k,["questionId"])&&(b&&a.get("/ask/moderator/searchByThread/questions",
{params:k,success:function(a){a=a.items;D.find("tbody").append(f(B,a)).parent().show()},error:x}),l&&a.get("/ask/moderator/searchByThread/answers",{params:k,success:function(a){a=a.items;h.val(t.find("tbody tr").length+a.length);t.find("tbody").append(c(B,a)).parent().show()},error:x}))}function m(b,c,d){a.post("/ask/moderator/moderate/"+d,{params:{action:b,uris:c.join(",")},success:A,error:x})}function p(a,b){var c=[];b.forEach(function(b){var d="Field "+b+" must be specified.";b=a[b]&&0!==a[b].trim().length?
void 0:d;b&&c.push(b)});return c.length?(q(c),!1):!0}function q(a){a="<ul>"+b.map(a,function(a){return"<li>"+a+"</li>"}).join("")+"</ul>";var c=d.find(".moderationError");c.show();c.find(".a-alert-content").html(a)}function r(){d.find(".moderationError").hide().find(".a-alert-content").html("");d.find(".moderationSuccess").hide().find(".a-alert-content").html("")}function g(){d.find("#questionResultTable").hide().find("tbody").html("");d.find("#answerResultTable").hide().find("tbody").html("")}function y(){C.val("");
h.val(0);G.val(10)}function n(a){var c=[];a.find("tbody tr").each(function(a,d){if(b(d).find("input:checkbox").is(":checked")){var e=b(d).find(".itemUri").data("uri");-1===c.indexOf(e)&&c.push(e)}});return c}function w(a){a=a.attr("id");return a.match("question")?"questions":a.match("answer")?"answers":""}function v(a,b){var c=[];return a.filter(function(a){a=a[b]||"";var d=-1===c.indexOf(a);d&&c.push(a);return d})}function A(a){d.find(".moderationSuccess").show().find(".a-alert-content").html("Action Success!")}
function x(a){q(["Error Encountered: "+a.http.responseText])}var B=d.find("#template-tr-item").first().html(),D=d.find("#questionResultTable"),t=d.find("#answerResultTable"),C=d.find("input[name='nextPageToken']"),h=d.find("input[name='offset']"),G=d.find("input[name='limit']"),E="byThread";a.on("a:tabs:searchCriterion:select",function(a){E=a.selectedTab.tabName});d.delegate(".searchByCustomer","click",function(a){r();g();y();l()});d.delegate(".searchByThread","click",function(a){r();g();y();k(!0,
!0)});d.delegate(".loadMore","click",function(a){r();"byCustomer"===E?l():k(!1,!0)});d.delegate(".unsuppress","click",function(a){r();d.find("table:visible").each(function(a,c){var d=b(c),e=n(d);(d=w(d))&&e.length&&m("unsuppress",e,d)})});d.delegate(".suppress","click",function(a){r();d.find("table:visible").each(function(a,c){var d=b(c),e=n(d);(d=w(d))&&e.length&&m("suppress",e,d)})});d.delegate(".suppressAll","click",function(b){r();(b=d.find("input[name='questionId']").val())?confirm("Are you sure to suppress the question and all the answers to it?")&&
a.post("/ask/moderator/moderate/suppressAll",{params:{questionId:b.trim()},success:A,error:x}):q(["No Question Specified."])});d.delegate("input[name='selectAll']","change",function(a){a=this.checked;b(this).parents("table").find("tbody input:checkbox").prop("checked",a)});d.delegate("select[name='type']","change",function(a){r();g()})}}});g.when("A","a-modal","a-alert","ready").register("askDesktopAnswerSolicitationPostAnswer",function(a,b,f){return{setup:function(c){var e=a.$("#askPostAnswerFormSection-"+
c),d=a.$("#askPostAnswerForm-"+c),l=a.$("#askAnswerTextArea-"+c),k=a.$("#askPostAnswerResponse-"+c),m=a.$("#askPostAnswerSpinner-"+c),p=f("#askPostAnswerError-"+c);a.declarative.create(d,"ask-post-answer-submit");a.declarative("ask-post-answer-submit","submit",function(c){c.$event.preventDefault();e.children().hide();a.post(d.attr("action"),{withCredentials:!0,params:d.serializeArray(),indicator:m,success:function(c,d,e){k.html(c);c=a.$(".askAnswerMoreQuestionsModal");c.length?b.create(c,{name:"askAnswerMoreQuestionsModal",
inlineContent:c,height:305,width:427}).show():(k.show(),l.val(""))},error:function(b){401===b.http.status||409===b.http.status?(a.declarative.remove(d,"ask-post-answer-submit"),d.submit()):(d.show(),p.html(b.http.responseText).show())}})})}}})});
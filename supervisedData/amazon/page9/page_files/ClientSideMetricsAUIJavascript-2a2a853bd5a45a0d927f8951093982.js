(function(d,c,z){function m(a){for(var b={},d,e,c=0;c<a.length;c++)e=a[c],d=e.r+e.s+e.m,e.c&&(b[d]||(b[d]=[]),b[d].push(a[c]));return b}function t(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];try{if(d.isSupported)return d.send(a)}catch(e){}}}function l(){if(e.length){for(var b=0;b<n.length;b++)n[b]();a._flhs+=1;u();t(m(e.splice(0,e.length)),v,I,E)}H=J=0}function u(){C&&g({k:"chk",f:a._flhs,l:a._lpn,s:"full"},"csm")}function g(b,g,f){f=f||{};!d.ue_furl||0===f.bf&&a.isBF||(b={r:f.r||a.rid,
s:f.s||d.ue_sid,m:f.m||d.ue_mid,mkt:f.mkt||d.ue_mkt,sn:f.sn||d.ue_sn,c:g,d:b,t:f.t||a.d(),cs:f.c&&d.ue_qsl},a._lpn[g]=(a._lpn[g]||0)+1,f.b?t(m([b]),v,E):f.nb?t(m([b]),v,I,E):f.img||N[g]?t(m([b]),E):f.ff?(e.push(b),l()):f.n?(e.push(b),0===K?l():H||(H=c.setTimeout(l,K))):(e.push(b),J||(J=c.setTimeout(l,M))))}function w(a,b,d){L++;L==G&&g({m:"Max number of Forester Logs exceeded",f:"forester-client.js",logLevel:"ERROR"},c.ue_err_chan||"jserr");(L<G||d&&d.il)&&g(a,b,d)}function D(){if(!O){for(var b=0;b<
p.length;b++)p[b]();for(b=0;b<n.length;b++)n[b]();a._flhs+=1;u();t(m(e.splice(0,e.length)),v,E);O=!0}}var A={};(function(){function a(b){return 10>b?"0"+b:b}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,e){var k,h,l,m,R=c,p,q=e[a];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(a));"function"===typeof n&&(q=n.call(e,a,q));switch(typeof q){case "string":return b(q);
case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";c+=g;p=[];if("[object Array]"===Object.prototype.toString.apply(q)){m=q.length;for(k=0;k<m;k+=1)p[k]=d(k,q)||"null";l=0===p.length?"[]":c?"[\n"+c+p.join(",\n"+c)+"\n"+R+"]":"["+p.join(",")+"]";c=R;return l}if(n&&"object"===typeof n)for(m=n.length,k=0;k<m;k+=1)"string"===typeof n[k]&&(h=n[k],(l=d(h,q))&&p.push(b(h)+(c?": ":":")+l));else for(h in q)Object.prototype.hasOwnProperty.call(q,
h)&&(l=d(h,q))&&p.push(b(h)+(c?": ":":")+l);l=0===p.length?"{}":c?"{\n"+c+p.join(",\n"+c)+"\n"+R+"}":"{"+p.join(",")+"}";c=R;return l}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});
var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,g,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof A.stringify&&(A.stringify=function(a,b,e){var k;g=c="";if("number"===typeof e)for(k=0;k<e;k+=1)g+=" ";else"string"===typeof e&&(g=e);if((n=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})})})();
var y=function(){function a(b,d){if(null==b)return d.push("!n");if("number"===typeof b)return d.push("!"+b);if("string"===typeof b)return"\\"==b[b.length-1]?d.push("'"+b.replace(/'/g,"\\'")+"u005C'"):d.push("'"+b.replace(/'/g,"\\'")+"'");if("boolean"===typeof b)return d.push(b?"!t":"!f");if(b instanceof Array){d.push("*");for(var e=0;e<b.length;e++)a(b[e],d);return d.push(")")}if("object"==typeof b){d.push("(");for(e in b)b.hasOwnProperty(e)&&(d.push(e),a(b[e],d));return d.push(")")}return d.push("!n")}
return{stringify:function(b){var d=[];a(b,d);return d.join("")}}}(),P=d.ue_qsl||2E3,G=2E3,C=1===window.ue_ddq,r=function(){},F=c.JSON&&c.JSON.stringify||A&&A.stringify,b=y.stringify,a=d.ue||{},y=d.uet||r;(d.uet||r)("bb","ue_frst_v2",{wb:1});var q="//"+d.ue_furl+"/1/batch/1/OE/",e=[],p=[],n=[],O=!1,H,J,K=void 0===d.ue_hpfi?1E3:d.ue_hpfi,M=void 0===d.ue_lpfi?1E4:d.ue_lpfi,N={"scheduled-delivery":1},L=0,I=function(){function b(){if(c.XDomainRequest){var a=new XDomainRequest;a.onerror=r;a.ontimeout=r;
a.onprogress=r;a.onload=r;a.timeout=0;return a}if(c.XMLHttpRequest){a=new XMLHttpRequest;if(!("withCredentials"in a))throw"";return a}if(c.ActiveXObject){for(var d=0;d<k.length&&!a;d++)try{a=new ActiveXObject(k[d]),k=[k[d]]}catch(f){}return a}}function g(b){for(var f=[],e=b[0]||{},c=0;c<b.length;c++){var k={};k[b[c].c]=b[c].d;f.push(k)}return{rid:e.r||a.rid,sid:e.s||d.ue_sid,mid:e.m||d.ue_mid,mkt:e.mkt||d.ue_mkt,sn:e.sn||d.ue_sn,reqs:f}}function f(a){var d=g(a),f=b();if(!f)throw"";f.onerror=function(){for(var b=
0;b<a.length;b++)e.push(a[b]);I.isSupported=!1};f.open("POST",q,!0);f.setRequestHeader&&f.setRequestHeader("Content-type","text/plain");f.send(F(d))}var k="MSXML2.XMLHTTP.6.0 MSXML2.XMLHTTP.5.0 MSXML2.XMLHTTP.4.0 MSXML2.XMLHTTP.3.0 MSXML2.XMLHTTP Microsoft.XMLHTTP".split(" ");return{send:function(a){for(var b in a)a.hasOwnProperty(b)&&a[b].length&&f(a[b])},buildPOSTBodyLog:g,isSupported:!0}}(),E=function(){return{send:function(e){for(var c in e)if(e.hasOwnProperty(c)){for(var f=e[c],k=f,g={},l=void 0,
n=0;n<k.length;n++)l=k[n].c,g[l]||(g[l]=[]),g[l].push(k[n]);var f=f[0]||{},k=f.sn||d.ue_sn,f=q+(f.m||d.ue_mid)+":"+(f.s||d.ue_sid)+":"+(f.r||a.rid)+(k?":"+k:""),k=[],l=f,n=[],m=void 0;for(m in g)if(g.hasOwnProperty(m))for(var p=0;p<g[m].length;p++){var r=g[m][p],u=encodeURIComponent((r.cs?b:F)(r.d));n.push({l:u,t:r.t,p:1,c:m,d:r.cs?"c":"j"})}g=n;n=void 0;m="$";for(r=0;r<g.length;){p=g[r];n!=p.c?(l+=m+p.c+"=",m="&",n=p.c):l+=",";var u=l,w=p.d+":",t=p,l=(t.l.match(".{1,"+(P-l.length)+"}[^%]{0,2}")||
[])[0]||"";t.l=t.l.substr(l.length);l=u+(w+l+":"+p.t);if(p.l)l+=":"+p.p++ +"_",k.push(l),l=f,m="$",n=0;else if(r++,1!=p.p)for(l+=":"+p.p+"_"+p.p,u=0;u<p.p-1;u++)k[k.length-u-1]+=p.p}k.push(l);f=k;for(k=0;k<f.length;k++)(new Image).src=f[k]}},isSupported:!0}}(),v=function(){return{send:function(a){for(var b in a)if(a.hasOwnProperty(b)){var d=I.buildPOSTBodyLog(a[b]);if(!navigator.sendBeacon(q,F(d)))throw"";}},isSupported:!!navigator.sendBeacon}}();a._fic=E;a._fac=I;a._fbc=v;a._flq=e;a.sid=a.sid||d.ue_sid;
a.mid=a.mid||d.ue_mid;a.furl=a.furl||d.ue_furl;a.sn=a.sn||d.ue_sn;a.isBF=function(){var b=c.performance||c.webkitPerformance,d=z.ue_backdetect&&z.ue_backdetect.ue_back&&document.ue_backdetect.ue_back.value,f=a.bfini;return b&&b.navigation&&2===b.navigation.type||1<f||!f&&1<d}();a._flhs=a._flhs||0;a._lpn=a._lpn||{};try{c.amznJQ&&c.amznJQ.declareAvailable&&c.amznJQ.declareAvailable("forester-client"),c.P&&c.P.register&&c.P.register("forester-client",r)}catch(T){d.ueLogError(T,{logLevel:"WARN"})}(function(){a.log&&
a.log.isStub&&(a.log.replay(function(a,b,d){var e=a[2]||{};e.t=b;e.r=d;e.n=1;w(a[0],a[1],e)}),a.onunload.replay(function(a){p.push(a[0])}),a.onflush.replay(function(a){n.push(a[0])}))})();a.log=w;a.log.reset=function(){L=0};a.onunload=function(a){p.push(a)};a.onflush=function(a){n.push(a)};a.attach("beforeunload",D);a.attach("pagehide",D);y("ld","ue_frst_v2",{wb:1})})(ue_csm,window,document);
(function(d,c){function z(b){if(b)return b.replace(/^\s+|\s+$/g,"")}function m(b,a){if(!b)return{};var c="INFO"===a.logLevel;b.m&&b.m.message&&(b=b.m);var e=a.m||a.message||"",e=b.m&&b.m.message?e+b.m.message:b.m&&b.m.target&&b.m.target.tagName?e+("Error handler invoked by "+b.m.target.tagName+" tag"):b.m?e+b.m:b.message?e+b.message:e+"Unknown error",e={m:e,name:b.name,type:b.type,csm:P+" "+(b.fromOnError?"onerror":"ueLogError")},g,l,m=0,u;e.logLevel=a.logLevel||w;a.adb&&(e.adb=a.adb);if(g=a.attribution)e.attribution=
""+g;if(!c){e.pageURL=a.pageURL||""+(window.location?window.location.href:"")||"missing";e.f=b.f||b.sourceURL||b.fileName||b.filename||b.m&&b.m.target&&b.m.target.src;e.l=b.l||b.line||b.lineno||b.lineNumber;e.c=b.c?""+b.c:b.c;e.s=[];e.t=d.ue.d();if((c=b.stack||(b.err?b.err.stack:""))&&c.split)for(e.csm+=" stack",g=c.split("\n");m<g.length&&e.s.length<G;)(c=g[m++])&&e.s.push(z(c));else for(e.csm+=" callee",l=t(b.args||arguments,"callee"),g=m=0;l&&m<G;)u=C,l.skipTrace||(c=l.toString())&&c.substr&&(u=
0===g?4*C:u,u=1==g?2*C:u,e.s.push(c.substr(0,u)),g++),l=t(l,"caller"),m++;if(!e.f&&0<e.s.length&&(m=e)&&m.s){var y,c=0<m.s.length?m.s[0]:"";g=1<m.s.length?m.s[1]:"";c&&(y=c.match(F));y&&3==y.length||!g||(y=g.match(r));y&&3==y.length&&(m.f=y[1],m.l=y[2])}}return e}function t(b,a){try{return b[a]}catch(d){}}function l(b,a){if(b){var l=m(b,a),e=window.ue_err?window.ue_err.addContextInfo:null;e&&e(l);d.ue.log(l,a.channel||g,{nb:1});"function"===typeof ue_err.elh&&ue_err.elh(b,a);try{if(!b.fromOnError){var p=
c.console,n=c.JSON,e="Error logged with the Track&Report JS errors API(http://tiny/1covqr6l8/wamazindeClieUserJava): ";if(p){if(n&&n.stringify)try{e+=n.stringify(l)}catch(u){e+="no info provided; converting to string failed"}else e+=l.m;"function"===typeof p.error?p.error(e,l):"function"===typeof p.log&&p.log(e,l)}}}catch(r){}}}function u(b,a){if(b&&!(d.ue_err.ec>d.ue_err.mxe)){d.ue_err.ter.push(b);a=a||{};var c=b.logLevel||a.logLevel;a.logLevel=c;a.attribution=b.attribution||a.attribution;c&&c!==
w&&c!==D&&c!==A&&c!==y||d.ue_err.ec++;c&&c!=w||ue_err.ecf++;l(b,a)}}if(!d.ueLogError||d.ueLogError.isStub){var g=d.ue_err_chan||"jserr",w="FATAL",D="ERROR",A="WARN",y="DOWNGRADED",P="v5",G=20,C=256,r=/\(?([^\s]*):(\d+):\d+\)?/,F=/.*@(.*):(\d*)/;l.skipTrace=1;m.skipTrace=1;u.skipTrace=1;(function(){if(d.ue_err.erl){var b=d.ue_err.erl.length,a,c;for(a=0;a<b;a++)c=d.ue_err.erl[a],l(c.ex,c.info);ue_err.erl=[]}})();d.ueLogError=u}})(ue_csm,window);
ue_csm.ue.exec(function(d,c){var z=function(){},m=function(){return{send:function(d,m){if(m&&d){var g;if(c.XDomainRequest)g=new XDomainRequest,g.onerror=z,g.ontimeout=z,g.onprogress=z,g.onload=z,g.timeout=0;else if(c.XMLHttpRequest){if(g=new XMLHttpRequest,!("withCredentials"in g))throw"";}else g=void 0;if(!g)throw"";g.open("POST",d,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");g.send(m)}},isSupported:!0}}(),t=function(){return{send:function(c,m){if(c&&m)if(navigator.sendBeacon(c,
m))d.ue_sbuimp&&d.ue&&d.ue.ssw&&d.ue.ssw("eelsts","scs");else throw"";},isSupported:!!navigator.sendBeacon&&!(c.cordova&&c.cordova.platformId&&"ios"==c.cordova.platformId)}}();d.ue._ajx=m;d.ue._sBcn=t},"Transportation-clients")(ue_csm,window);
ue_csm.ue.exec(function(d,c){function z(){for(var b=0;b<arguments.length;b++){var d=arguments[b];try{var g;if(d.isSupported){var l=h.buildPayload(n,e);g=d.send(a,l)}else throw dummyException;return g}catch(m){}}F({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},c.ue_err_chan||"jserr")}function m(){if(e.length){for(var a=0;a<N.length;a++)N[a]();z(r._sBcn||{},r._ajx||{});e=[];p={};n={};I=E=O=H=0}}function t(){var a=new Date,b=function(a){return 10>
a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}function l(a){try{return JSON.stringify(a)}catch(b){}return null}function u(a){try{return JSON.parse(a)}catch(b){}return null}function g(a,b,g,n){var p=!1;n=n||{};K++;K==y&&F({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",
logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},c.ue_err_chan||"jserr");var q;if(q=!(K>=y))(q=a&&-1<a.constructor.toString().indexOf("Object")&&b&&-1<b.constructor.toString().indexOf("String")&&g&&-1<g.constructor.toString().indexOf("String"))||J++;q&&(a.producerId=a.producerId||b,a.schemaId=a.schemaId||g,a.timestamp=t(),b=Date.now?Date.now():+new Date,a.messageId=d.ue_id+"-"+b+"-"+K,n&&!n.ssd&&(a.sessionId=a.sessionId||d.ue_sid,a.requestId=a.requestId||d.ue_id,a.obfuscatedMarketplaceId=
a.obfuscatedMarketplaceId||d.ue_mid),(b=l(a))?(b=b.length,(e.length==P||O+b>G)&&m(),O+=b,a={data:h.compressEvent(a)},e.push(a),(n||{}).n?0===v?m():I||(I=c.setTimeout(m,v)):E||(E=c.setTimeout(m,T)),p=!0):p=!1);!p&&d.ue_int&&console.error("Invalid JS Nexus API call");return p}function w(){if(!L){for(var a=0;a<M.length;a++)M[a]();for(a=0;a<N.length;a++)N[a]();e.length&&(d.ue_sbuimp&&d.ue&&d.ue.ssw&&(a=l({dct:n,evt:e}),d.ue.ssw("eeldata",a),d.ue.ssw("eelsts","unk")),z(r._sBcn||{}));L=!0}}function D(a){M.push(a)}
function A(a){N.push(a)}var y=1E3,P=499,G=524288,C=function(){},r=d.ue||{},F=r.log||C,b=d.uex||C;(d.uet||C)("bb","ue_sushi_v1",{wb:1});var a=d.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",q=["messageId","timestamp"],e=[],p={},n={},O=0,H=0,J=0,K=0,M=[],N=[],L=!1,I,E,v=void 0===d.ue_hpsi?1E3:d.ue_hpsi,T=void 0===d.ue_lpsi?1E4:d.ue_lpsi,h=function(){function a(b){p[b]||(p[b]="#"+H++,n[p[b]]=b);return p[b]}function b(a){if(a)switch(typeof a){case "number":return!(isNaN(a)||
Infinity===a)&&a.toString().length>("#"+H).length;case "boolean":break;case "string":return a.length>("#"+H).length;default:return!0}return!1}function d(e){if(b(e)){var c=0;e instanceof Array?c=2:e instanceof Function?c=0:e instanceof Object&&(c=1);switch(c){case 0:e=a(e);break;case 2:var g=e;e=[];for(var c=g.length,h=0;h<c;h++)e[h]=d(g[h]);break;case 1:c={};for(g in e)e.hasOwnProperty(g)&&(c[a(g)]=-1==q.indexOf(g)?d(e[g]):e[g]);e=c}}return e}return{compressEvent:d,buildPayload:function(){return l({cs:{dct:n},
events:e})}}}();(function(){if(r.event&&r.event.isStub){if(d.ue_sbuimp&&d.ue&&d.ue.ssw&&d.ue.ssw("eeldata")){var a=u(d.ue.ssw("eeldata").val);a&&a.evt instanceof Array&&a.dct instanceof Object&&(e=a.evt,n=a.dct,e&&n&&((a=(d.ue.ssw("eelsts")||{}).val)&&"unk"===a&&m(),d.ue.ssw("eeldata","{}"),d.ue.ssw("eelsts","unk")))}r.event.replay(function(a){a[3]=a[3]||{};a[3].n=1;g.apply(this,a)});r.onSushiUnload.replay(function(a){D(a[0])});r.onSushiFlush.replay(function(a){A(a[0])})}})();r.attach("beforeunload",
w);r.attach("pagehide",w);r._cmps=h;r.event=g;r.event.reset=function(){K=0};r.onSushiUnload=D;r.onSushiFlush=A;try{c.P&&c.P.register&&c.P.register("sushi-client",C)}catch(U){d.ueLogError(U,{logLevel:"WARN"})}b("ld","ue_sushi_v1",{wb:1})},"Nxs-JS-Client")(ue_csm,window);
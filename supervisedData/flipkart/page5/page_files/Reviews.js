webpackJsonp([6],{"./actions/AddRatingAndReviewActions.js":function(e,t,a){"use strict";function n(){return{type:l}}function i(e){return{type:u,data:e}}function r(e){return{type:d,error:e}}function s(e){return function(t){return t(n()),o.a.post(Object.assign({},c.a,{pathname:"/api/3/reviews/product",credentials:"include",acceptErrors:!0}),e).then(function(e){return t(i(e.RESPONSE))},function(e){return t(r(e)),Promise.reject(e.RESPONSE||e)})}}t.a=s;var o=a("./actions/ApiCaller.ts"),c=a("./actions/BaseAjaxConfig.ts"),l="ADD_PRODUCT_RATING_REVIEW_REQUEST",u="ADD_PRODUCT_RATING_REVIEW_SUCCESS",d="ADD_PRODUCT_RATING_REVIEW_ERROR"},"./components/AspectRatingWidget/AspectRatingWidget.css":function(e,t){e.exports={"aspect-rating":"_1nl9s1","aspect-rating-class":"R3upVV","aspect-rating-svg":"_1jHJkZ",trail:"nNeArc","progress-green":"yAaxjK","progress-orange":"_2UwRUl","progress-red":"_3F7hhu",text:"PRNS4f",title:"_3wUVEm"}},"./components/AspectRatingWidget/AspectRatingWidget.js":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"a",function(){return m});var s=a("./node_modules/react/index.js"),o=a.n(s),c=a("./utils/safeTraverse.ts"),l=a("./utils/FDPHelper.ts"),u=a("./components/AspectRatingWidget/AspectRatingWidget.css"),d=a.n(u),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=[d.a["progress-red"],d.a["progress-red"],d.a["progress-orange"],d.a["progress-green"],d.a["progress-green"],d.a["progress-green"]],m=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.aspect,n=e.position,i=e.sendFDPEvent,r=e.pid;i&&l.a.trackEvent({iid:a.i(c.a)(t,["tracking","impressionId"]),an:a.i(c.a)(t,["value","name"]),pid:r,aid:a.i(c.a)(t,["value","id"]),ar:a.i(c.a)(t,["value","average"]),p:n,en:"ASRI"})}},{key:"getPath",value:function(e,t,a,n){var i=void 0,r=n/2,s=360/t*e,o=s*Math.PI/180,c=a+r+a*Math.sin(o),l=a+r-a*Math.cos(o),u=void 0;return t===e?u="M"+(a+r)+","+r+" A "+a+","+a+",0,1,1,"+(a+r-1e-4)+","+r:(i=s>180?1:0,u="M"+(a+r)+","+r+" A "+a+","+a+",0,"+i+",1,"+c+","+l),u}},{key:"render",value:function(){var e=this.props.aspect,t=a.i(c.a)(e,["value","average"])||a.i(c.a)(e,["averageRating"]),n=a.i(c.a)(e,["value","base"])||5;if("number"!=typeof t)return null;var i=Math.round(10*t)/10,r=v[Math.floor(i)];return o.a.createElement("div",{className:d.a["aspect-rating"]},o.a.createElement("div",{className:d.a["aspect-rating-class"]},o.a.createElement("svg",{className:d.a["aspect-rating-svg"],viewBox:"0 0 100 100"},o.a.createElement("path",{className:d.a.trail,d:this.getPath(n,n,46,8),strokeWidth:8,fillOpacity:0}),t&&o.a.createElement("path",{className:r,d:this.getPath(i,n,46,8),strokeWidth:8,fillOpacity:0}),o.a.createElement("text",{className:d.a.text,x:50,y:50},i.toFixed(1)))),o.a.createElement("div",{className:d.a.title},a.i(c.a)(e,["value","name"])))}}]),t}(s.Component)},"./components/FiveStarWidget/FiveStarWidget.css":function(e,t){e.exports={"yellow-star":"wvjgRW","grey-star":"_3Hc5hn",rating:"kcuK2o",tooltip:"_14Na-3",star:"_2tZufY",ratingText:"_1Dk1bd",ratingText0:"XfETOX",ratingText1:"LV79LE",ratingText2:"sHUoTq",ratingText3:"_1jV6JI",ratingText4:"_3IFYIT"}},"./components/FiveStarWidget/FiveStarWidget.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a("./node_modules/react/index.js"),c=a.n(o),l=a("./node_modules/react-redux/es/index.js"),u=a("./node_modules/classnames/index.js"),d=a.n(u),p=a("./components/Tooltip/index.tsx"),v=a("./strings.json"),m=a.n(v),g=a("./actions/tooltipActions.js"),f=a("./components/FiveStarWidget/FiveStarWidget.css"),h=a.n(f),w=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleRatingClick=function(e){return function(){var t=a.props.starCount-e;a.setState({selectedRating:t}),a.props.sendRating&&a.props.rateClicked(t),a.props.addRating&&a.props.addRatingClicked(t,a.props.pid)}},a.handleMouseOut=function(e){var t=a.props.hideTooltip;"function"==typeof t&&t(e)},a.state={selectedRating:e.selectedRating},a}return s(t,e),w(t,[{key:"getTootipData",value:function(e){switch(e){case 0:return m.a.excellent;case 1:return m.a.veryGood;case 2:return m.a.good;case 3:return m.a.bad;case 4:return m.a.veryBad;default:return""}}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.starCount;t++){var a,i=d()(h.a.star,(a={},n(a,h.a["yellow-star"],t>this.props.starCount-1-this.state.selectedRating),n(a,h.a["grey-star"],t<this.props.starCount-this.state.selectedRating),a));e.push(c.a.createElement("span",{id:"star-"+t+"-"+this.props.id,onClick:this.handleRatingClick(t),className:i,key:t},"★",c.a.createElement(p.a,{className:h.a.tooltip,anchor:"#star-"+t+"-"+this.props.id,position:"top",hoverInTimeout:0,hoverOutTimeout:0},this.getTootipData(t))))}var r=void 0;return this.state.selectedRating&&(r=this.props.starCount-parseInt(this.state.selectedRating,10)),c.a.createElement("div",null,c.a.createElement("div",{className:h.a.rating,onMouseOut:this.handleMouseOut},e),r>=0&&r<=4&&!this.props.addRating&&c.a.createElement("span",{className:d()(h.a.ratingText,h.a["ratingText"+r])},this.getTootipData(r)))}}]),t}(o.Component),b=function(e){return{hideTooltip:g.d}};t.a=a.i(l.connect)(null,b)(y)},"./components/FiveStarWidget/index.js":function(e,t,a){"use strict";var n=a("./components/FiveStarWidget/FiveStarWidget.js");t.a=n.a},"./components/MinimalProductInfo/MinimalProductInfo.css":function(e,t){e.exports={"product-info":"_3wBtPi",name:"Sw6kZ2","rating-widget":"mBjPf6","image-container":"_2sxWXr",image:"hoZMHD"}},"./components/MinimalProductInfo/MinimalProductInfo.js":function(e,t,a){"use strict";var n=a("./node_modules/prop-types/index.js"),i=(a.n(n),a("./node_modules/react/index.js")),r=a.n(i),s=a("./node_modules/react-router/es/index.js"),o=a("./components/ProductRatingWidget/ProductRatingWidget.js"),c=a("./utils/getImageUrl.ts"),l=a("./components/MinimalProductInfo/MinimalProductInfo.css"),u=a.n(l),d=function(e){var t=e.rating,n=e.image,i=e.title,l=e.productUrl,d=a.i(c.a)(n,48);return r.a.createElement(s.Link,{to:l||""},r.a.createElement("div",{className:u.a["product-info"]},r.a.createElement("div",{className:u.a.name},r.a.createElement("span",null,i)),r.a.createElement("div",{className:u.a["rating-widget"]},r.a.createElement(o.a,{product:{value:{rating:t}},view:"minimal"}))),r.a.createElement("div",{className:u.a["image-container"]},r.a.createElement("img",{src:d,className:u.a.image})))};t.a=d},"./components/ReviewsSortUnit/ReviewsSortUnit.css":function(e,t){e.exports={outerContainer:"H6JLlu",sortOption:"_3MuAT6",selected:"_25FbMV"}},"./components/ReviewsSortUnit/ReviewsSortUnit.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a("./node_modules/react/index.js"),c=a.n(o),l=a("./node_modules/classnames/index.js"),u=a.n(l),d=a("./components/ReviewsSortUnit/ReviewsSortUnit.css"),p=a.n(d),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),v(t,[{key:"render",value:function(){return c.a.createElement("div",{className:u()(p.a.outerContainer),onClick:this.props.onClick},c.a.createElement("div",{className:u()(p.a.sortOption,n({},p.a.selected,this.props.selected))},this.props.sortOption," ",this.props.showCount&&c.a.createElement("span",null,"(",this.props.count,")")))}}]),t}(o.Component);t.a=m},"./components/ReviewsSortUnit/index.js":function(e,t,a){"use strict";var n=a("./components/ReviewsSortUnit/ReviewsSortUnit.js");t.a=n.a},"./components/ReviewsWidget/index.js":function(e,t,a){"use strict";var n=a("./components/ReviewsWidget/ReviewsWidget.js");t.a=n.a},"./components/SimpleProductHeader/SimpleProductHeader.css":function(e,t){e.exports={"header-card":"_1Z9vji",title:"NWW_bH",arrow:"lVlJHX","product-info":"_2tw077"}},"./components/SimpleProductHeader/SimpleProductHeader.js":function(e,t,a){"use strict";var n=a("./node_modules/prop-types/index.js"),i=(a.n(n),a("./node_modules/react/index.js")),r=a.n(i),s=a("./node_modules/react-router/es/index.js"),o=a("./components/MinimalProductInfo/MinimalProductInfo.js"),c=a("./components/Icons/Icons.tsx"),l=a("./components/SimpleProductHeader/SimpleProductHeader.css"),u=a.n(l),d=function(e){var t=function(t){e.router.goBack()};return r.a.createElement("div",{className:u.a["header-card"]},e.showBackBtn&&r.a.createElement("a",{href:"javascript:void(0)",onClick:t,className:u.a.arrow},a.i(c.w)()),r.a.createElement("div",{className:u.a.title},r.a.createElement("span",null,e.headerCaption)),r.a.createElement("div",{className:u.a["product-info"]},r.a.createElement(o.a,e)))};d.defaultProps={showBackBtn:!1},t.a=a.i(s.withRouter)(d)},"./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.css":function(e,t){e.exports={"review-rating-content":"_2vvRAH","loader-container":"_269OP5","error-container":"_39G8Ox","not-allowed-container":"_3KMsCk",overlay:"_2z2sqF","overlay-loader":"_3fX1k7"}},"./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.js":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=t.location.query.pid,n=t.location.query.rating;return{productSummary:e.productSummary[a],reviewData:e.reviewPageData,userState:e.userState,productId:a,rating:n}}function o(e){return a.i(d.bindActionCreators)({AddProductRatingAndReview:C.a,fetchReviewData:k.d,fetchProductSummary:j.d,postProductRating:x.d},e)}Object.defineProperty(t,"__esModule",{value:!0});var c=a("./node_modules/react/index.js"),l=a.n(c),u=a("./node_modules/react-redux/es/index.js"),d=a("./node_modules/redux/es/index.js"),p=a("./node_modules/react-router/es/index.js"),v=a("./strings.json"),m=a.n(v),g=a("./components/Common/Loader/Loader.tsx"),f=a("./utils/asyncStatusHelper.ts"),h=a("./components/SimpleProductHeader/SimpleProductHeader.js"),w=a("./components/Toast/Toast.tsx"),y=a("./components/Error/Error.js"),b=a("./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.js"),R=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.js"),E=a("./components/Title/Title.js"),_=a("./toasts.json"),P=a.n(_),C=a("./actions/AddRatingAndReviewActions.js"),x=a("./actions/reviewsConfirmationPageActions.js"),j=a("./actions/productSummaryActions.js"),k=a("./actions/reviewPageActions.js"),S=a("./utils/omnitureHelper.js"),A=a("./utils/safeTraverse.ts"),N=a("./utils/FDPHelper.ts"),O=a("./node_modules/fk-cp-perf-beacon/index.js"),D=a.n(O),T=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.css"),W=a.n(T),H=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),I=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={overlay:!1,ratingStatus:"",reviewData:null},a.submit=a.submit.bind(a),a.postRating=a.postRating.bind(a),a}return r(t,e),H(t,[{key:"componentDidMount",value:function(){D()({prefix:"des",sampleRate:.2});var e=this.props.productId;this.props.fetchReviewData(e),this.props.productSummary||this.props.fetchProductSummary([{productId:e}])}},{key:"postRating",value:function(e){var t=this,n=a.i(A.a)(this.props,["location","query","source"]);this.props.postProductRating(this.props.productId,e,n).then(function(e){t.setState({ratingStatus:"SUCCESS"});var n=t.props.productSummary;if(n){var i=[],r={},s=a.i(A.a)(n,["value","id"]),o=a.i(A.a)(n,["value","rating","count"]);r.eVar16=r.prop16=a.i(A.a)(n,["value","analyticsData","superCategory"]),r.eVar17=r.prop17=a.i(A.a)(n,["value","analyticsData","subCategory"]),r.eVar19=r.prop19=a.i(A.a)(n,["value","analyticsData","vertical"]),r.products=";"+s+";;;;eVar22="+a.i(A.a)(n,["value","analyticsData","superCategory"])+"| eVar19="+r.eVar19,0===o&&i.push("event50"),i.push("event34"),r.events=i.join(","),S.a.trackLink(r,"Rating added")}},function(e){return t.setState({ratingStatus:"ERROR"}),Promise.reject(e)})}},{key:"componentWillReceiveProps",value:function(e){this.sendToAnalytics(e)}},{key:"sendToAnalytics",value:function(e){var t=e.productSummary,n=e.location,i=e.userState;if(a.i(f.i)(t)&&!this.isAnalyticsSend){var r="Write Review: "+a.i(A.a)(t,["value","titles","title"]);N.a.setNavigationContext({pn:"Write Review",pt:r}),N.a.trackPageView();var s=[],o={};o.eVar16=o.prop16=a.i(A.a)(t,["value","analyticsData","superCategory"]),o.eVar17=o.prop17=a.i(A.a)(t,["value","analyticsData","subCategory"]),o.eVar19=o.prop19=a.i(A.a)(t,["value","analyticsData","vertical"]),o.products=";"+a.i(A.a)(t,["value","id"])+";;;;eVar22="+a.i(A.a)(t,["value","analyticsData","category"])+"|eVar19="+o.eVar19,s.push("event1");var c=Object.assign({},S.a.getBaseOmnitureFields({pageName:"Write Review",pageType:r,location:n,userState:i}),o,{events:s.join(",")});S.a.trackOmniturePageView(c),this.isAnalyticsSend=!0}}},{key:"submit",value:function(e){var t=this,n=this.props.userState,i=n.firstName,r=n.lastName,s=i||r?i+" "+r:e.author,o=a.i(A.a)(this.props,["location","query","source"]),c={title:e.title,rating:e.rating,text:e.description,productId:this.props.productId,isCompleted:!0,author:s,source:o},l=this.props.productSummary;this.setState({showOverlay:!0}),this.props.AddProductRatingAndReview(c).then(function(e){var n=[],i={},r=a.i(A.a)(l,["value","id"]),s=a.i(A.a)(l,["value","rating","reviewCount"]);i.prop16=a.i(A.a)(l,["value","analyticsData","superCategory"]),i.prop17=a.i(A.a)(l,["value","analyticsData","subCategory"]),i.prop19=i.eVar19=a.i(A.a)(l,["value","analyticsData","vertical"]),i.products=";"+r+";;;;eVar22="+a.i(A.a)(l,["value","analyticsData","superCategory"])+"| eVar19="+i.eVar19,n.push("event33"),0===s&&n.push("event51"),i.prop47="Write Review Page",i.events=n.join(","),S.a.trackLink(i,"Review Submitted"),t.setState({showOverlay:!1}),t.props.toast.show(P.a.reviewConfirmationToast),t.props.router.push(a.i(A.a)(e,["data","url"]))},function(e){t.setState({showOverlay:!1}),t.props.toast.show({message:e.message||e.ERROR_MESSAGE,level:"ERROR"})})}},{key:"render",value:function(){var e=this.props,t=e.productSummary,n=e.userState,i=e.reviewData,r=e.rating,s=a.i(A.a)(i,["isCertifiedBuyer"])||!1;if(a.i(f.i)(t)&&a.i(f.i)(i)){var o=t.value;return l.a.createElement("div",{className:W.a["review-rating-content"]},l.a.createElement(E.a,{title:m.a.homePageTitle,overrideServerTitle:!0}),o&&l.a.createElement(h.a,{headerCaption:m.a.ratingAndReview,image:a.i(A.a)(o,["media","images",0,"url"]),title:a.i(A.a)(o,["titles","title"]),rating:a.i(A.a)(o,["rating"]),productUrl:a.i(A.a)(o,["baseUrl"])}),l.a.createElement(b.a,null),s&&l.a.createElement(R.a,{submitHandler:this.submit,hasAuthorName:!(!n.firstName&&!n.lastName),postRatingHandler:this.postRating,ratingStatus:this.state.ratingStatus,reviewData:i,rating:r}),!s&&l.a.createElement("div",{className:W.a["not-allowed-container"]},l.a.createElement(y.a,{errorType:"error404",title:"",subtitle:m.a.reviewNotAllowed})),this.state.showOverlay&&l.a.createElement("div",{className:W.a.overlay},l.a.createElement(g.a,{className:W.a["overlay-loader"]})))}return a.i(f.h)(t)||a.i(f.h)(i)?l.a.createElement("div",{className:W.a["error-container"]},l.a.createElement(y.a,null)):l.a.createElement("div",{className:W.a["loader-container"]},l.a.createElement(g.a,null))}}]),t}(c.Component),F=a.i(u.connect)(s,o)(I);t.default=a.i(w.a)(a.i(p.withRouter)(F))},"./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.css":function(e,t){e.exports={"rating-review-card":"_2rfo2u","submit-btn":"_3oe6G6","review-card":"_3zS_0H","rating-card":"_3AwHsn",caption:"_1O_Sj9","rating-status":"_3lM63h",error:"Huglld",success:"_1tudS1","rating-widget":"Kj7FZF","review-content":"_2ynvot","text-box":"_1b7zWX","description-box":"_2Vq_k8",label:"_1huZCe",control:"_2lNh_V","h-border":"_2qU1N7","move-right":"_1v1y1A"}},"./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,c,l,u=a("./node_modules/prop-types/index.js"),d=(a.n(u),a("./node_modules/react/index.js")),p=a.n(d),v=a("./node_modules/react-redux/es/index.js"),m=a("./components/FiveStarWidget/FiveStarWidget.js"),g=a("./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.js"),f=a("./components/StringWidget/StringWidget.tsx"),h=a("./strings.json"),w=a.n(h),y=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.css"),b=a.n(y),R=a("./utils/asyncStatusHelper.ts"),E=a("./utils/validators.js"),_=a("./node_modules/classnames/index.js"),P=a.n(_),C=a("./utils/safeTraverse.ts"),x=a("./actions/reviewPageTitleActions.js"),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),S=60,A=5e3,N=5,O=(c=o=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));l.call(n);var s=a.i(C.a)(e.reviewData,["title"])||"",o=a.i(C.a)(e.reviewData,["text"])||"",c=a.i(C.a)(e.reviewData,["author"])||"",u=e.rating&&e.rating<=N?e.rating:a.i(C.a)(e.reviewData,["rating"])||"";return n.state={controls:{title:{value:s,valid:!0},description:{value:o,valid:!0},author:{value:c,valid:!0},rating:{value:u,valid:!0}}},n.validators={title:function(e){return{valid:a.i(E.i)(e,S),message:w.a.reviewTitleMax,value:e.substring(0,S)}},description:function(e){var t={valid:a.i(E.k)(e),message:w.a.reviewDescriptionEmpty};return t.valid&&(t={valid:a.i(E.i)(e,A),message:w.a.reviewDescriptionMax,value:e.substring(0,A)}),t},rating:function(e){return{valid:a.i(E.k)(e),message:w.a.reviewRatingEmpty}},author:function(e){return{valid:!0}}},n.setRating=n.setRating.bind(n),n.submitHandler=n.submitHandler.bind(n),n.titleChangeHandler=n.onChangeHandler("title").bind(n),n.descriptionChangeHandler=n.onChangeHandler("description").bind(n),n.authorChangeHandler=n.onChangeHandler("author").bind(n),n}return s(t,e),k(t,[{key:"onChangeHandler",value:function(e){var t=this;return function(a){var i=t.validators[e],r=void 0;return"function"==typeof i&&(r=t.validators[e](a),t.setState({controls:j({},t.state.controls,n({},e,j({value:a},r)))})),r}}},{key:"setRating",value:function(e){this.setState({controls:j({},this.state.controls,{rating:{valid:!0,value:e}})}),this.props.postRatingHandler(e)}},{key:"submitHandler",value:function(){var e=this,t=this.state.controls,a=t.title,i=t.description,r=t.author,s=t.rating,o=Object.keys(this.state.controls).reduce(function(t,a){var i,r=e.validators[a]?e.validators[a](e.state.controls[a].value):{valid:!0};return j({},t,(i={},n(i,a,j({},e.state.controls[a],r)),n(i,"valid",t.valid&&r.valid),i))},{valid:!0});this.setState({controls:o}),o.valid&&this.props.submitHandler({title:a.value,description:i.value,author:r.value,rating:s.value})}},{key:"getRatingWidget",value:function(){return p.a.createElement("div",{className:b.a["rating-widget"]},!this.state.controls.rating.valid&&p.a.createElement("div",{className:P()(b.a["rating-status"],b.a.error)},w.a.ratingEmpty),a.i(R.i)(this.props.ratingStatus)&&p.a.createElement("div",{className:P()(b.a["rating-status"],b.a.success)},w.a.ratingSuccess),a.i(R.h)(this.props.ratingStatus)&&p.a.createElement("div",{className:P()(b.a["rating-status"],b.a.error)},w.a.ratingError),p.a.createElement(m.a,{sendRating:!0,id:"add-rating",rateClicked:this.setRating,starCount:N,selectedRating:this.state.controls.rating.value}))}},{key:"getTitleBox",value:function(){var e=this.state.controls.title;return p.a.createElement(g.a,{value:e.value,type:"text",onChangeHandler:this.titleChangeHandler,placeholder:w.a.reviewTitlePlaceholder,label:w.a.reviewTitle,valid:e.valid,errorMessage:e.message})}},{key:"getDescriptionBox",value:function(){var e=this.state.controls.description;return p.a.createElement(g.a,{onBlurComp:this.handleAutoTitleCall,value:e.value,type:"textarea",onChangeHandler:this.descriptionChangeHandler,placeholder:w.a.reviewDescPlaceholder,label:w.a.reviewDescription,valid:e.valid,selectedRating:this.state.controls.rating.value,errorMessage:e.message})}},{key:"getAuthorBox",value:function(){return p.a.createElement(g.a,{value:this.state.controls.author.value,type:"text",onChangeHandler:this.authorChangeHandler,placeholder:w.a.reviewAuthorPlaceholder,label:w.a.reviewerName})}},{key:"render",value:function(){var e=this.props.hasAuthorName;return p.a.createElement("div",{className:b.a["rating-review-card"]},p.a.createElement("div",{className:b.a["rating-card"]},p.a.createElement("div",{className:b.a.caption},p.a.createElement(f.b,{strKey:"ratingCaption"})),this.getRatingWidget()),p.a.createElement("hr",{className:b.a["h-border"]}),p.a.createElement("div",{className:b.a["review-card"]},p.a.createElement("div",{className:b.a.caption},p.a.createElement(f.b,{strKey:"reviewCaption"})),p.a.createElement("div",{className:b.a["review-content"]},this.getDescriptionBox(),p.a.createElement("hr",{className:b.a["h-border"]}),this.getTitleBox(),!e&&p.a.createElement("div",null,p.a.createElement("hr",{className:b.a["h-border"]}),this.getAuthorBox()))),p.a.createElement("button",{className:b.a["submit-btn"],onClick:this.submitHandler},w.a.submit))}}]),t}(d.Component),l=function(){var e=this;this.handleAutoTitleCall=function(t,n){e.props.fetchProductReviewData(t,n).then(function(t){var n=a.i(C.a)(t,["data","reviewTitle"]);e.setState({controls:j({},e.state.controls,{title:{valid:!0,value:n}})})})}},c),D={fetchProductReviewData:x.d};t.a=a.i(v.connect)("",D)(O)},"./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.css":function(e,t){e.exports={"review-side-bar":"_1ZCgAu",header:"_3SyFhG",instructions:"_1gZBWY",item:"_13cTJo",question:"_1RrlUn",answer:"_20QwAZ",link:"_1vqsw_"}},"./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.js":function(e,t,a){"use strict";var n=a("./node_modules/react/index.js"),i=a.n(n),r=a("./components/StringWidget/StringWidget.tsx"),s=a("./strings.json"),o=a.n(s),c=a("./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.css"),l=a.n(c),u=function(e){var t=[{questionKey:"reviewSidebarQuestion_1",answerKey:"reviewSidebarAnswer_1"},{questionKey:"reviewSidebarQuestion_2",answerKey:"reviewSidebarAnswer_2"},{questionKey:"reviewSidebarQuestion_3",answerKey:"reviewSidebarAnswer_3",linkTextKey:"reviewSidebarLinkText_3",link:"/helpcentre"}];return i.a.createElement("div",{className:l.a["review-side-bar"]},i.a.createElement("div",{className:l.a.header},i.a.createElement(r.b,{strKey:"reviewSidebarHeading"})),i.a.createElement("div",{className:l.a.instructions},t.map(function(e,t){return i.a.createElement("div",{className:l.a.item,key:t},i.a.createElement("div",{className:l.a.question},i.a.createElement(r.b,{strKey:e.questionKey})),i.a.createElement("div",{className:l.a.answer},i.a.createElement(r.b,{strKey:e.answerKey}),e.linkTextKey&&i.a.createElement("a",{className:l.a.link,href:e.link,title:o.a[e.linkTextKey]},i.a.createElement(r.b,{strKey:e.linkTextKey}))))})))};t.a=u},"./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.css":function(e,t){e.exports={"text-box":"_32o8JY",error:"_2o5VpG",label:"_1AyhZ5","error-text":"_1aV0fV",control:"_16nh-W",focused:"ofBQLv","description-box":"_2onsaO","move-right":"_3bf835"}},"./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a("./node_modules/lodash/pick.js"),c=a.n(o),l=a("./node_modules/prop-types/index.js"),u=(a.n(l),a("./node_modules/react/index.js")),d=a.n(u),p=a("./node_modules/classnames/index.js"),v=a.n(p),m=a("./utils/shallowEqual.ts"),g=a("./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.css"),f=a.n(g),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},w=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,valid:!0,errorMessage:""},a.onChangeHandler=a.onChangeHandler.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a}return s(t,e),w(t,[{key:"componentWillReceiveProps",value:function(e){var t=["value","valid","errorMessage"],n=c()(e,t);a.i(m.a)(n,c()(this.props,t))||this.setState(n)}},{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){var e=this.state.value;this.setCurrentFieldState({value:e,focused:!1}),"textarea"===this.props.type&&this.props.onBlurComp(this.props.selectedRating,e)}},{key:"setCurrentFieldState",value:function(e){if(this.props.onChangeHandler){var t=this.props.onChangeHandler(e.value);this.setState(h({},e,t))}else this.setState(h({},e))}},{key:"onChangeHandler",value:function(e){this.setCurrentFieldState({value:e.target.value})}},{key:"getTextElement",value:function(){var e={onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChangeHandler,value:this.state.value,placeholder:this.props.placeholder,className:f.a.control};switch(this.props.type){case"text":return d.a.createElement("input",e);case"textarea":return d.a.createElement("textarea",h({rows:"8"},e));default:return null}}},{key:"render",value:function(){var e,t=this.state,a=t.valid,i=t.focused;return d.a.createElement("div",{className:v()(f.a["text-box"],(e={},n(e,f.a.error,!a),n(e,f.a.focused,i),e))},!a&&d.a.createElement("div",{className:v()(f.a["move-right"],f.a["error-text"])},d.a.createElement("span",null,this.state.errorMessage)),d.a.createElement("div",{className:f.a.label},d.a.createElement("span",null,this.props.label)),this.getTextElement())}}]),t}(u.Component);y.defaultProps={value:"",validators:[],type:"text"},t.a=y},"./pages/ReadReviewsPage/ReadReviewsPage.css":function(e,t){e.exports={"full-width-pagination":"_1vKM3Y","full-opacity":"_3BRC7L","no-opacity":"_1KVtzT","read-reviews-page-margin":"lDK8vn","read-reviews-content":"hFPo14","header-container":"_1vJnV0","page-title":"_1SJWAA","minimal-info":"_2WNU6h",line:"_3DCdKt","top-border":"_5PYJrC",ratingClicked:"_2xRHIi",showAll:"_1FVdAJ","left-panel":"_3n2LXv","image-container":"_1LAYGY",name:"_1SFrA2","rating-widget":"_2flroY","price-widget":"NWgUtU","rating-text":"_2FuBeO","right-pannel":"_2RmBZs","button-gray":"_2yST67","full-width":"_3wYu6I","tabs-container":"_2_xtR5","dropdown-and-certified":"FAWsKi","dropdown-container":"_1vl_HT",dropdown:"_1kL65M","dropdown-bar":"_3hcHXX",checkbox:"_3cPF7a","ratings-container":"UUOe7N",sentiments:"_19oIq_","aspect-rating":"UP6Cnc","text-class":"KlzRDz","positive-text":"_3MBycG","negative-text":"bZiMmh","min-height":"_3y6XNb","error-or-loader":"_15pqpV","error-container":"_3Xw3Jf","no-reviews":"FOr-VY"}},"./pages/ReadReviewsPage/ReadReviewsPage.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return d.a.createElement("div",{className:O.a["read-reviews-page-margin"]},d.a.createElement(te,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var c=a("./node_modules/lodash/omit.js"),l=a.n(c),u=a("./node_modules/react/index.js"),d=a.n(u),p=a("./node_modules/react-redux/es/index.js"),v=a("./node_modules/classnames/index.js"),m=a.n(v),g=a("./node_modules/fk-cp-perf-beacon/index.js"),f=a.n(g),h=a("./node_modules/react-router/es/index.js"),w=a("./utils/asyncStatusHelper.ts"),y=a("./components/RatingStarsUnit/index.js"),b=a("./components/RatingCountUnit/index.js"),R=a("./components/ReviewsSortUnit/index.js"),E=a("./components/ReviewsWidget/index.js"),_=a("./components/ProductRatingWidget/ProductRatingWidget.js"),P=a("./components/PriceWidget/index.ts"),C=a("./utils/omnitureHelper.js"),x=a("./components/Title/Title.js"),j=a("./strings.json"),k=a.n(j),S=a("./utils/safeTraverse.ts"),A=a("./components/Common/Card/index.ts"),N=a("./pages/ReadReviewsPage/ReadReviewsPage.css"),O=a.n(N),D=a("./components/Pagination/Pagination.js"),T=a("./components/Dropdown/Dropdown.js"),W=a("./components/Checkbox/index.js"),H=a("./utils/shallowEqual.ts"),I=a("./pages/Checkout/CheckoutSection.js"),F=a("./components/Error/Error.js"),V=a("./actions/readReviewsPageActions.js"),M=a("./components/StringWidget/StringWidget.tsx"),B=a("./actions/productReviewActions.js"),q=a("./actions/modalActions.js"),U=a("./utils/FDPHelper.ts"),K=a("./utils/stringUtils.ts"),L=a("./utils/getImageUrl.ts"),Z=a("./components/AspectRatingWidget/AspectRatingWidget.js"),X=a("./utils/uniqueId.ts"),z=a("./utils/smartLoginHelper.js"),J=a("./actions/loginSignupActions.js"),Y=a("./components/Toast/Toast.tsx"),G=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Q=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchReviewsData=function(){var e=n.props.location.query,t=e.pid,i=e.aid,r=e.sort,s=e.certifiedBuyer,o=n.props.location.query.page,c=a.i(S.a)(n.props,["rnrDetails","reviewsData"])||{},l=c.REVIEW_COUNT;o&&"1"!==o?n.props.fetchReadReviewsPageData(t,i,r,s,o,l):n.props.fetchReadReviewsPageData(t,i,r,s)},n.handleCertifiedChanged=function(e){n.setState({ratingClicked:!1});var t=n.props.location.query.sort,i=n.props.location.query.aid,r=a.i(S.a)(n.props,["rnrDetails","tabsData","tabs"]),s=a.i(S.a)(n.props,["rnrDetails","tabsData","sort"]);e.checked&&n.trackClick("PP_ParameterizedReviewclick_FilterReview_certified_buyer","PP_Review_FilterReview"),n.trackFDPFilter(e,!0),n.props.router.push({pathname:n.props.location.pathname,query:{pid:n.props.location.query.pid,certifiedBuyer:e.checked,sort:t||s[0].sortOrder,aid:i||r[0].tabId,page:"1"}})},n.handleSortChanged=function(e){n.setState({ratingClicked:!1});var t=n.props.location.query.certifiedBuyer,i=n.props.location.query.aid,r=a.i(S.a)(n.props,["rnrDetails","tabsData","tabs"]);n.trackClick("PP_ParameterizedReviewclick_FilterReview_"+e,"PP_Review_FilterReview"),n.trackFDPFilter(e,!1),n.props.router.push({pathname:n.props.location.pathname,query:{pid:n.props.location.query.pid,certifiedBuyer:t||!1,sort:e,aid:i||r[0].tabId,page:"1"}})},n.renderSentiments=function(){var e=a.i(S.a)(n.props,["rnrDetails","ratingsData"]),t=a.i(S.a)(e,["histogramFeedbackList"])||[];return d.a.createElement("div",{className:O.a.sentiments},d.a.createElement("div",{className:O.a["aspect-rating"]},d.a.createElement(Z.a,{aspect:e})),t&&d.a.createElement("div",{className:O.a["text-class"]},t[0]&&d.a.createElement("div",null,d.a.createElement("span",{className:"POSITIVE"===t[0].feedbackPolarity?O.a["positive-text"]:O.a["negative-text"]},t[0].percent,"% "),d.a.createElement("span",null,t[0].text)),t[1]&&d.a.createElement("div",null,d.a.createElement("span",{className:"POSITIVE"===t[1].feedbackPolarity?O.a["positive-text"]:O.a["negative-text"]},t[1].percent,"% "),d.a.createElement("span",null,t[1].text))))},n.trackClick=function(e,t){C.a.trackLink({prop20:e,prop3:"Read Review",prop4:"Read Review",products:C.a.getValueFromPageContext("READREVIEWS","products")},t)},n.trackFDPFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=a.i(S.a)(n.props,["rnrDetails","tabsData","tabs"])||[],r=i.find(function(e){return e.isSelected}),s=a.i(S.a)(n.props,["rnrDetails","tabsData","certifiedBuyer"]),o=a.i(S.a)(s,["value","isSelected"]),c=a.i(S.a)(n.props,["rnrDetails","tabsData","sort"])||[],l=c.find(function(e){return e.isSelected}),u=l.text,d={};t||(d=c.find(function(t){return t.sortOrder===e}),u=a.i(S.a)(d,["text"])),U.a.trackEvent({iid:t?a.i(S.a)(s,["impressionId"]):a.i(S.a)(d,["impressionId"]),an:a.i(S.a)(r,["value"]),pid:a.i(S.a)(n.props,["location","query","pid"]),aid:a.i(S.a)(r,["tabId"]),cb:t?!o:o,sn:u,en:"AFC"})},n.renderNoReviewText=function(e,t){return d.a.createElement("div",{className:O.a["no-reviews"]},e?d.a.createElement(M.b,{strKey:"noAspectReviews",attributes:{aspectValue:t}}):d.a.createElement(M.b,{strKey:"noReviews"}))},n.renderError=function(){return d.a.createElement("div",null,d.a.createElement(A.a,{className:m()(O.a["read-reviews-content"],O.a["error-or-loader"])},d.a.createElement("div",{className:O.a["error-container"]},d.a.createElement(F.a,{errorAction:n.fetchReviewsData}))))},n.tabClicked=n.tabClicked.bind(n),n.onClick=n.onClick.bind(n),n.onRatingClicked=n.onRatingClicked.bind(n),n.state={ratingClicked:!1,rating:null},n}return s(t,e),G(t,[{key:"componentDidMount",value:function(){f()({prefix:"des",sampleRate:.2}),this.fetchReviewsData(),U.a.setNavigationContext({pn:"Read Review",pt:"Read Review"})}},{key:"componentWillReceiveProps",value:function(e){var t=a.i(S.a)(e,["rnrDetails","tabsData","tabs"])||[],n=a.i(S.a)(e,["rnrDetails","reviewsData"])||{},i=e.location,r=i.query,s=n.REVIEW_COUNT,o=a.i(S.a)(n,["reviewsData","nonAspectReview"]),c=r.pid,l=r.aid,u=r.certifiedBuyer,d=r.sort,p=r.page,v=r.aspectName,m=t.map(function(e){return e.isSelected}).indexOf(!0),g=p||"1";if(a.i(H.a)(this.props.location.query,i.query)||(this.props.location.query.page!==p&&"1"!==g?o?this.props.fetchProductReviewsForPage(null,t[m],c,g,s,d,u):this.props.fetchProductAspectReviewsForPage(c,g,s,l,d,u):this.props.fetchReadReviewsPageData(c,l,d,u)),a.i(w.i)(n)&&!this.isOmniturePVSend){var f=a.i(S.a)(e,["rnrDetails","tabsData","tabs",m,"value"]),h=a.i(S.a)(e,["rnrDetails","reviewsData","reviewsData","pageContext"]),y={},b={},R=["event1"];y.pageType="Read Review",y.category=b.eVar1=a.i(S.a)(h,["analyticsData","category"]),y.superCategory=b.eVar16=b.prop16=a.i(S.a)(h,["analyticsData","superCategory"]),y.subCategory=b.eVar17=b.prop17=a.i(S.a)(h,["analyticsData","subCategory"]),y.vertical=b.eVar19=b.prop19=a.i(S.a)(h,["analyticsData","vertical"]),y.title=b.prop49=a.i(S.a)(h,["titles","title"]),b.prop22=f,v&&(b.prop20="PP_ParameterizedReviewClick_"+v),y.products=b.products=";"+a.i(S.a)(h,["productId"])+";;;;eVar22="+a.i(S.a)(h,["analyticsData","category"])+"| eVar19="+b.eVar19,y.pageName="Read Review: "+y.title;var E=Object.assign({},C.a.getBaseOmnitureFields({pageName:y.pageName,pageType:y.pageType,location:this.props.location,userState:this.props.userState}),b,{events:R.join(",")});C.a.setPageContext("READREVIEWS",y),C.a.trackOmniturePageView(E),U.a.setNavigationContext({pn:y.pageName,pt:y.pageType}),U.a.trackPageView(),this.isOmniturePVSend=!0}}},{key:"componentWillUnmount",value:function(){U.a.flushEvents()}},{key:"onRatingClicked",value:function(e){this.setState({ratingClicked:!0,rating:e});var t=a.i(S.a)(this.props,["rnrDetails","reviewsData"]),n=t.REVIEW_COUNT,i=this.props.location,r=i.query,s=r.pid,o=r.sort,c=r.certifiedBuyer,l=a.i(S.a)(this.props,["rnrDetails","tabsData","tabs",0]),u=r.page,d=u||1;this.props.fetchProductReviewsForPage(e,l,s,d,n,o,c)}},{key:"onClick",value:function(e){if(!a.i(S.a)(this.props,["userState","isLoggedIn"]))return void a.i(z.e)(this.props.showModal,this.props.toast,this.props.makeLoginRequest,{source:"ReadReviewsPage",page:"NA"});this.props.router.push(e)}},{key:"tabClicked",value:function(e,t,n){if(this.setState({ratingClicked:!1}),t!==e||n){var i=a.i(S.a)(this.props,["rnrDetails","tabsData","tabs"]),r=this.props.location,s=r.query;this.trackClick("PP_ParameterizedReviewClick_Tabchange_"+i[e].value,"PP_Review_Tab change"),U.a.trackEvent({iid:a.i(S.a)(i,[e,"impressionId"]),an:a.i(S.a)(i,[e,"value"]),pid:s.pid,aid:a.i(S.a)(i,[e,"tabId"]),en:"ATC"});var o=l()(s,["page"]);i[e].tabId&&(o.aid=i[e].tabId),this.props.router.push({pathname:this.props.location.pathname,query:o})}}},{key:"render",value:function(){var e,t=this,i=this.props,r=i.userState,s=i.showModal,o=i.voteAction,c=a.i(S.a)(this.props,["rnrDetails","tabsData","tabs"])||[],l=c.map(function(e){return e.isSelected}).indexOf(!0),u=a.i(S.a)(this.props,["rnrDetails","tabsData","sort"])||[],p=u.find(function(e){return e.isSelected}),v=a.i(S.a)(this.props,["rnrDetails","tabsData","certifiedBuyer"]),g=a.i(S.a)(this.props,["rnrDetails","reviewsData"])||{},f=a.i(S.a)(this.props,["rnrDetails","ratingsData"])||{},C=a.i(S.a)(r,["isLoggedIn"]),j=f.totalReviewsCount,N=f.averageRating,H=f.totalRatingsCount,F=f.breakup,V=g.REVIEW_COUNT,B=g.totalCount,q=a.i(S.a)(this.props,["rnrDetails","reviewsData","reviewsData","productSummary","value"]),U=this.props.location.query.page||1,Z=Math.ceil(B/V),z=a.i(S.a)(this.props.location,["query","aid"]),J=void 0!==a.i(S.a)(g,["reviewsData","aspectReview"])&&z&&"overall"!==z.toLowerCase(),Y=(J?a.i(S.a)(g,["reviewsData","aspectReview"]):a.i(S.a)(g,["reviewsData","nonAspectReview"]))||[],G=a.i(S.a)(q,["title"]),Q=a.i(L.a)(a.i(S.a)(q,["imageUrl"]),246),$=a.i(S.a)(q,["rating"]),ee=a.i(S.a)(q,["pricing"]),te=a.i(w.g)(g);return a.i(w.h)(g)?this.renderError():d.a.createElement("div",null,te&&a.i(I.b)(),d.a.createElement(x.a,{title:q?a.i(K.a)(k.a.readReviewsPageTitle,{title:G}):k.a.homePageTitle}),d.a.createElement(A.a,{className:m()(O.a["read-reviews-content"],n({},O.a["min-height"],!a.i(w.i)(g)))},d.a.createElement("div",{className:m()("row")},d.a.createElement("div",{className:m()("col-3-12")},q&&d.a.createElement("div",null,d.a.createElement(h.Link,{to:a.i(S.a)(this.props,["rnrDetails","reviewsData","reviewsData","productSummary","action","url"])||""},d.a.createElement("div",{className:m()("row",O.a["left-panel"])},d.a.createElement("div",{className:O.a["image-container"]},d.a.createElement("img",{src:Q,className:O.a.image})),d.a.createElement("div",{className:O.a.name},d.a.createElement("span",null,G)),d.a.createElement("div",{className:O.a["rating-widget"]},d.a.createElement(_.a,{product:{value:{rating:$}},view:"minimal",showCount:!1}),d.a.createElement(M.b,{strKey:"ratingsTitleNew",attributes:{ratingsCount:Number(a.i(S.a)($,["count"])||0).toLocaleString()},className:O.a["rating-text"]})," ",d.a.createElement(M.b,{strKey:"ReviewsTitle",attributes:{reviewsCount:Number(a.i(S.a)($,["reviewCount"])||0).toLocaleString()},className:O.a["rating-text"]})),d.a.createElement("div",{className:O.a["price-widget"]},d.a.createElement(P.a,{pricing:ee,sellingPriceClass:O.a["selling-price"],oldPriceClass:O.a["old-price"],discountClass:O.a.discount,display:["selling-price","old-price","discount"]})))))),d.a.createElement("div",{className:m()(O.a["right-pannel"],"col-9-12")},d.a.createElement("div",{className:O.a["page-title"]},d.a.createElement(M.b,{strKey:"allReviews"})),d.a.createElement("div",{className:m()("row",O.a["tabs-container"])},c&&c.map(function(e,a){return d.a.createElement(R.a,{key:a,selected:a===l,sortOption:e.value,onClick:t.tabClicked.bind(t,a,l,e.firstLoad)})}),d.a.createElement("div",{className:O.a["dropdown-and-certified"]},u&&u.length&&d.a.createElement("div",{className:O.a["dropdown-container"]},d.a.createElement(T.a,{className:O.a.dropdown,barClassName:O.a["dropdown-bar"],name:"sort",onChange:this.handleSortChanged},u.map(function(e,t){return d.a.createElement("option",{key:t,value:e.sortOrder,selected:e.isSelected},e.text)}))),a.i(S.a)(v,["value","text"])&&d.a.createElement(W.a,{className:O.a.checkbox,label:v.value.text,onChange:this.handleCertifiedChanged,checked:v.value.isSelected}))),J?this.renderSentiments():N&&d.a.createElement("div",{className:m()("row",O.a["ratings-container"])},d.a.createElement("div",{className:"col-3-12"},d.a.createElement(b.a,{ratingsCount:H,reviewsCount:j,avgRating:N})),d.a.createElement("div",{className:"col-9-12"},d.a.createElement(y.a,{onClick:this.onRatingClicked.bind(this),total:H,breakup:F}))),this.state.ratingClicked?d.a.createElement("div",{onClick:this.tabClicked.bind(this,0,0,!0),className:m()(O.a.ratingClicked,O.a.line)},d.a.createElement(M.b,{strKey:"ratingClicked",attributes:{rating:this.state.rating,activeSort:a.i(S.a)(p,["text"])}}),d.a.createElement("span",{className:m()(O.a.showAll)}," ",d.a.createElement(M.b,{strKey:"showAll"}))):null,d.a.createElement("div",{className:m()("row",O.a["full-width"],(e={},n(e,O.a["no-opacity"],!a.i(w.i)(g)),n(e,O.a["full-opacity"],a.i(w.i)(g)),e))},a.i(w.i)(g)&&0===Y.length&&this.renderNoReviewText(J,a.i(S.a)(c,[l,"value"])),a.i(w.i)(g)&&Y.map(function(e,t){return d.a.createElement("div",{className:m()(O.a.line,n({},O.a["top-border"],0!==t)),key:a.i(X.a)()},d.a.createElement(E.a,{className:m()(O.a["full-width"]),userReview:e.value,voteAction:o,showModal:s,isLoggedIn:C,isAspect:J,aspect:a.i(S.a)(c,[l]),impressionId:g.impressionId}))}),Z>1&&a.i(w.i)(g)&&!this.state.ratingClicked?d.a.createElement(D.a,{className:m()(O.a["full-width-pagination"]),currentPage:U,numOfPages:Z,pathname:this.props.location.pathname,query:this.props.location.query}):null)))))}}]),t}(u.Component),$=function(e,t){return{rnrDetails:e.ratingsAndReviews,userState:e.userState}},ee={fetchReadReviewsPageData:V.d,fetchProductReviewsForPage:B.h,fetchProductAspectReviewsForPage:B.i,showModal:q.c,voteAction:B.g,makeLoginRequest:J.B},te=a.i(p.connect)($,ee)(a.i(h.withRouter)(a.i(Y.a)(Q)))},"./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.css":function(e,t){e.exports={"reviews-confirmation-page-margin":"_3X6CC3","reviews-confirmation-content":"_1hhliZ","page-title":"owgplv","no-products-text":"_1Zk21-","product-card":"_3sw6Ub","product-image-container":"P3ETrn","product-title":"_2hU8nC","write-review-link":"_3cPzR5",clearfix:"_1XsgH5"}},"./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.js":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return c.a.createElement("div",{className:f.a["reviews-confirmation-page-margin"]},c.a.createElement(F,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var o=a("./node_modules/react/index.js"),c=a.n(o),l=a("./node_modules/react-redux/es/index.js"),u=a("./node_modules/classnames/index.js"),d=a.n(u),p=a("./node_modules/fk-cp-perf-beacon/index.js"),v=a.n(p),m=a("./node_modules/react-router/es/index.js"),g=a("./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.css"),f=a.n(g),h=a("./utils/asyncStatusHelper.ts"),w=a("./components/Common/Card/index.ts"),y=a("./components/FiveStarWidget/index.js"),b=a("./components/Title/Title.js"),R=a("./actions/reviewsConfirmationPageActions.js"),E=a("./utils/safeTraverse.ts"),_=a("./components/Common/Image/SimpleImage.tsx"),P=a("./utils/getImageUrl.ts"),C=a("./components/StringWidget/index.ts"),x=a("./components/Common/Loader/Loader.tsx"),j=a("./utils/omnitureHelper.js"),k=a("./actions/modalActions.js"),S=a("./strings.json"),A=a.n(S),N=a("./utils/smartLoginHelper.js"),O=a("./actions/loginSignupActions.js"),D=a("./components/Toast/Toast.tsx"),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),W=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.rateClicked=a.rateClicked.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a}return r(t,e),T(t,[{key:"componentDidMount",value:function(){if(!a.i(E.a)(this.props,["userState","isLoggedIn"]))return void a.i(N.e)(this.props.showModal,this.props.toast,this.props.makeLoginRequest,{source:"ReviewsConfirmation",page:"NA"});var e=a.i(E.a)(this.props,["location","query","source"]);this.props.fetchReviewsConfirmationPageData(0,5,e);var t=Object.assign({},j.a.getBaseOmnitureFields({pageName:"Review My Purchases",pageType:"Review My Purchases",location:this.props.location,userState:this.props.userState}),{events:"event1"});v()({prefix:"des",sampleRate:.2}),j.a.trackOmniturePageView(t)}},{key:"rateClicked",value:function(e,t){var n=[],i={},r=a.i(E.a)(this.props,["location","query","source"]);n.push("event34"),i.prop46="RMP",i.prop4="Review My Purchase",i.events=n.join(","),j.a.trackLink(i,"RMP Rating added"),this.props.postProductRating(e,t,r)}},{key:"onClickHandler",value:function(e){if(!a.i(E.a)(this.props,["userState","isLoggedIn"]))return void a.i(N.e)(this.props.showModal,this.props.toast,this.props.makeLoginRequest,{source:"ReviewsConfirmation",page:"NA"});this.props.router.push(e)}},{key:"render",value:function(){var e=this,t=a.i(E.a)(this.props,["reviewsConfirmationData","product"]);return a.i(h.i)(this.props.reviewsConfirmationData)?c.a.createElement("div",null,c.a.createElement(b.a,{title:A.a.reviewsConfirmationPageTitle}),c.a.createElement(w.a,{className:f.a["reviews-confirmation-content"]},c.a.createElement("div",{className:d()(f.a["page-title"])},c.a.createElement(C.a,{strKey:"reviewYourPurchases"})),t&&t.length<1?c.a.createElement("div",{className:f.a["no-products-text"]},c.a.createElement(C.a,{strKey:"confirmationNoProducts"})):null,t&&t.map(function(t,n){return c.a.createElement("div",{key:n,className:f.a["product-card"]},c.a.createElement("div",{className:f.a["product-image-container"]},c.a.createElement(_.a,{src:a.i(P.a)(t.dynamicImageUrl,232,90),size:232})),c.a.createElement("div",{className:f.a["product-title"]},t.productTitle),c.a.createElement("div",{className:f.a.clearfix},c.a.createElement(y.a,{sendRating:!0,rateClicked:e.rateClicked.bind(e,t.pid),starCount:5,selectedRating:t.rating})),t.writeUrl?c.a.createElement("div",{onClick:e.onClickHandler.bind(e,t.writeUrl),className:f.a["write-review-link"]},c.a.createElement(C.a,{strKey:"writeAReviewLink"})):null)}))):c.a.createElement("div",{className:f.a["reviews-confirmation-content"]},c.a.createElement(w.a,null,c.a.createElement(x.a,null)))}}]),t}(o.Component),H=function(e){return{reviewsConfirmationData:e.reviewsConfirmationPage,userState:e.userState}},I={fetchReviewsConfirmationPageData:R.e,postProductRating:R.d,showModal:k.c,makeLoginRequest:O.B},F=a.i(l.connect)(H,I)(a.i(m.withRouter)(a.i(D.a)(W)))}});